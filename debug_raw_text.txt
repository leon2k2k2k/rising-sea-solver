\n--- PAGE 29 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 29
                                                                                    
                 universalpropertyarebijections. Inshort,thereisauniquebijectionbetween P
                                                                  1                 
                 and P preservingthe“productstructure”(themapsto Mand N). Thisgivesusthe
                     2                                                              
                 righttonameanysuchproduct M N,sinceanytwosuchproductsareuniquely    
                                        ↗                                             
                 identified.                                                        
                    Thisdefinitionhastheadvantagethatitworksinmanycircumstances,andonce
                 wedefinecategories,wewillsoonseethattheaboveargumentappliesverbatim
                 in any category to show that products, if they exist, are unique up to unique
                 isomorphism. Evenifyouhaven’tseenthedefinitionofcategorybefore,youcan
                 verifythatthisagreeswithyournotionofproductinsomecategorythatyouhave
                 seenbefore(suchasthecategoryofvectorspaces,orthecategoryofmanifolds).
                    This is handy even in cases that you understand. For example, one way of
                 definingtheproductoftwomanifolds Mand Nistocutthembothupintocharts,  
                 thentakeproductsofcharts,thengluethemtogether. Butif Icutupthemanifolds
                 in one way, and you cut them up in another, how do we know our resulting
                 manifolds are the “same”? We could wave our hands, or make an annoying
                 argumentaboutrefiningcovers, butinstead, weshouldjustshowthattheyare
                 “categoricalproducts”andhencecanonicallythe“same”(i.e.,isomorphic). Wewill
                 formalizethisargumentin§1.2.                                       
                    Anothersetofnotionswewillabstractarecategoriesthat“behavelikemod-
                 ules”. Wewillwanttodefinekernelsandcokernelsfornewnotions,andweshould
                 make sure that these notions behave the way we expect them to. This leads us
                 tothedefinitionofabeliancategories,firstdefinedby Grothendieckinhis Toˆhoku
                 paper[Gr1].                                                        
                    In this chapter, we will give an informal introduction to these and related
                 notions,inthehopeofgivingjustenoughfamiliaritytocomfortablyusethemin
                 practice.                                                          
                                1.1Categoriesandfunctors                            
                    Theintroductionofthedigit0orthegroupconceptwasgeneralnonsensetoo, and
                 mathematicswasmoreorlessstagnatingforthousandsofyearsbecausenobodywasaround
                 totakesuchchildishsteps...                                         
                    —A. Grothendieck,[BP,p.4–5]                                      
                    Beforefunctoriality,peoplelivedincaves.                         
                    —B. Conrad                                                       
                    Webeginwithaninformaldefinitionofcategoriesandfunctors.         
                                                                                    
                 1.1.1. Categories.                                                 
                    Acategoryconsistsofacollectionofobjects, andforeachpairofobjects, a
                 setofmorphisms(orarrows)betweenthem. (Forexperts: technically,thisisthe
                 definitionofalocallysmallcategory. Inthecorrectdefinition,themorphismsneed
                 onlyformaclass,notnecessarilyaset,butsee Caution0.3.1.) Morphismsareoften
                 informallycalledmaps. Thecollectionofobjectsofacategory C isoftendenoted
                 obj(C),butwewillusuallydenotethecollectionalsoby C. If A,B C,thenthe 
                                                           ↑                        
                 setofmorphismsfrom Ato Bisdenoted Mor(A,B). Amorphismisoftenwritten\n\n--- PAGE 30 ---\n30    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 f: A B, and A is said to be the source of f, and B the target of f. (Of course,
                 Mor(A,B)istakentobedisjointfrom Mor(A ,B )unless A=A and B=B .)       
                                              →   →          →         →                    
                    M → orphismscomposeasexpected:thereisacomposition Mor(B,C) Mor(A,B)
                                                            ↗                         
                 Mor(A,C),andiff Mor(A,B)andg Mor(B,C),thentheircompositionisde-    
                             ↑           ↑                                          
                 noted g f. Composition is associative: if f Mor(A,B), g Mor(B,C), and → 
                        ↔                       ↑         ↑                           
                 h  Mor(C,D),thenh (g f)=(h g) f. Foreachobject A C,thereisalways    
                   ↑            ↔    ↔      ↔    ↔             ↑                            
                 anidentitymorphismid : A A,suchthatwhenyou(left-orright-)compose   
                                 A                                                  
                 a morphism with the identity, you get the same morphism. More precisely, for
                 anymorphismsf: A Bandg  →  : B C,id B f=fandg id B =g. (Ifyouwish,   
                                              ↔         ↔                               
                 youmaycheckthat“identitymorphismsareunique”: thereisonlyonemorphism
                 deservingthenameid → A .) Thisends → thedefinitionofacategory.         
                    Wehaveanotionofisomorphismbetweentwoobjectsofacategory(amor-    
                 phismf: A Bsuchthatthereexistssome—necessarilyunique—morphism      
                 g: B A,wheref gandg faretheidentityon Band Arespectively).           
                              ↔       ↔                                                 
                          →                                                           
                 1.1.2. Example. Theprototypicalexampletokeepinmindisthecategoryofsets,
                     →                                                                
                 denoted Sets. Theobjectsaresets,andthemorphismsaremapsofsets. (Because
                 Russell’sparadoxshowsthatthereisnosetofallsets,wedidnotsayearlierthat
                 thereisasetofallobjects. Butasstatedin§0.3,wearedeliberatelyomittingall
                 set-theoreticissues.)                                              
                 1.1.3. Example. Anothergoodexampleisthecategory Vec ofvectorspacesover
                                                     k                              
                 a given field k. The objects are k-vector spaces, and the morphisms are linear
                 transformations. (Whataretheisomorphisms?)                         
                 1.1. A. UNIMPORTANT EXERCISE. A category in which each morphism is an
                 isomorphismiscalledagroupoid. (Thisnotionisnotimportantinwhatwewill
                 discuss. Thepointofthisexerciseistogiveyousomepracticewithcategories,by
                 relatingthemtoanobjectyouknowwell.)                                
                 (a)Aperversedefinitionofagroupis: agroupoidwithoneobject. Makesenseof
                 this. (Similarly,incaseyoucare: aperversedefinitionofamonoidis: acategory
                 withoneobject.)                                                    
                 (b)Describeagroupoidthatisnotagroup.                               
                 1.1. B. EXERCISE. If Aisanobjectinacategory C,showthattheinvertibleelements
                 of Mor(A,A)formagroup(calledtheautomorphismgroupof A,denoted Aut(A)). 
                 Whataretheautomorphismgroupsoftheobjectsin Examples1.1.2and1.1.3? Show
                 thattwoisomorphicobjectshaveisomorphicautomorphismgroups. (Forreaders
                 withatopologicalbackground: if Xisatopologicalspace,thenthefundamental
                 groupoid is the category where the objects are points of X, and the morphisms
                 x  yarepathsfromxtoy,uptohomotopy. Thentheautomorphismgroupof      
                 x isthe(pointed)fundamentalgroupϑ (X,x ). Inthecasewhere Xisconnected,
                  0                       1  0                                      
                 an → dϑ                                                              
                     1                                                              
                      (X)isnotabelian,thisillustratesthefactthatforaconnectedgroupoid—
                 whosedefinitionyoucanguess—theautomorphismgroupsoftheobjectsareall 
                 isomorphic,butnotcanonicallyisomorphic.)                           
                 1.1.4. Example: abeliangroups. Theabeliangroups,alongwithgrouphomomor-
                 phisms,formacategory Ab.\n\n--- PAGE 31 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 31
                                                                                    
                 1.1.5. Important Example:Modulesoveraring. If Aisaring,thenthe A-modulesform
                 acategory Mod . (Thiscategoryhasadditionalstructure;itwillbetheprototypical
                           A                                                        
                 exampleofanabeliancategory,see§1.5.) Taking A = k,weobtain Example1.1.3;
                 taking A=Z,weobtain Example1.1.4.                                    
                 1.1.6. Example: rings. Thereisacategory Rings,wheretheobjectsarerings,and
                 themorphismsaremapsofringsintheusualsense(mapsofsetswhichrespect   
                 additionandmultiplication,andwhichsend1to1byourconventions,§0.3).  
                 1.1.7. Example: topologicalspaces. Thetopologicalspaces,alongwithcontinuous
                 maps,formacategory Top. Theisomorphismsarehomeomorphisms.           
                    Inalloftheaboveexamples,theobjectsofthecategorieswereinobviousways
                 sets with additional structure (a concrete category, although we won’t use this
                 terminology). Thisneedn’tbethecase,asthenextexampleshows.          
                                                                                    
                 1.1.8. Example: partiallyorderedsets. Apartiallyorderedset,(orposet),isaset S
                 alongwithabinaryrelation on Ssatisfying:                            
                                   ↘                                                
                     (i) x x(reflexivity),                                          
                        ↘                                                           
                     (ii) x yandy zimplyx z(transitivity),and                       
                        ↘      ↘      ↘                                             
                    (iii) ifx yandy xthenx=y(antisymmetry).                         
                         ↘      ↘                                                   
                 Apartiallyorderedset(S, )canbeinterpretedasacategorywhoseobjectsarethe
                                 ↘                                                  
                 elementsof S,andwithasinglemorphismfromxtoyifandonlyifx y(andno     
                                                            ↘                       
                 morphismotherwise).                                                
                    Atrivialexampleis(S, )wherex yifandonlyifx=y. Anotherexample    
                                  ↘      ↘                                          
                 is                                                                 
                 (1.1.8.1)                                                          
                                            •                                       
                                             %%                                     
                                            $$                                      
                                       •    •                                       
                 Heretherearethreeobjects. Theidentitymorphismsareomittedforconvenience,
                 andthetwonon-identitymorphismsaredepicted. Athirdexampleis         
                 (1.1.8.2)                  $$                                      
                                       •    •                                       
                                        %%   %%                                     
                                            $$                                      
                                       •    •                                       
                 Herethe“obvious”morphismsareagainomitted: theidentitymorphisms,andthe
                 morphismfromtheupperlefttothelowerright. Similarly,                
                                        $$  $$   $$                                 
                                  ···   •    •    •                                 
                 depictsapartiallyorderedset,whereagain,onlythe“generatingmorphisms”are
                 depicted.                                                          
                 1.1.9. Example: the category of subsets of a set, and the category of open subsets of a
                 topologicalspace. If Xisaset,thenthesubsetsformapartiallyorderedset,where
                 arrowsaregivenbyinclusion. (Becareful: youmaybeexpectingthearrowsto
                 gotheotherway,becauseof Example1.1.8.) Informally,if U V,thenwehave  
                                                       ≃                            
                 exactlyonemorphism U V inthecategory(andotherwisenone). Similarly,if
                                  →\n\n--- PAGE 32 ---\n32    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 Xisatopologicalspace,thentheopensetsformapartiallyorderedset,wherethe
                 mapsaregivenbyinclusions.                                          
                                                                                    
                 1.1.10. Definition. Asubcategory A ofacategory Bhasasitsobjectssomeofthe
                 objectsof B,andsomeofthemorphismsof B,suchthattheobjectsof A include  
                 thesourcesandtargetsofthemorphismsof A,andthemorphismsof A include   
                 theidentitymorphismsoftheobjectsof A,andarepreservedbycomposition. (For
                 example,(1.1.8.1)isinanobviouswayasubcategoryof(1.1.8.2). Also,wehavean
                 obvious“inclusion”i: A B,whichwillsoonbeanexampleofafunctor.)      
                 1.1.11. Functors.                                                  
                                  →                                                   
                    Acovariantfunctor Ffromacategory A toacategory B,denoted F: A B,    
                 isthefollowingdata. Itisamapofobjects F: obj(A) obj(B),andforeach A ,
                                                                  1                 
                 A                                                                  
                   2                                                                
                     A,andmorphismm: A                                              
                                   1                                                
                                      A                                             
                                       2                                            
                                        ,amorphism F(m): F(A                         
                                                      1                             
                                                       )  F(A                       
                                                            2                       
                                                             )in B → . We              
                    ↑                                                               
                 requirethat Fpreservesidentitymorphisms(for A                        
                                                ↑                                   
                                                 A → ,F(id                            
                                                      A                             
                                                       )=id                         
                                                          F(A)                      
                                                             ),andthat              
                 Fpreservescomposition(F(m 2 →  m 1 )=F(m 2 ) F(m 1 )). (Youm → aywishtoverify
                                      ↔          ↔                                      
                 thatcovariantfunctorssendisomorphismstoisomorphisms.) Atrivialexampleis
                 theidentityfunctorid: A A,whosedefinitionyoucanguess. Herearesome  
                 lesstrivialexamples.                                               
                                   →                                                  
                 1.1.12. Example: a forgetful functor. Consider the functor from the category of
                 vectorspaces(overafieldk)Vec to Sets,thatassociatestoeachvectorspaceits
                                      k                                             
                 underlyingset. Thefunctorsendsalineartransformationtoitsunderlyingmapof
                 sets. Thisisanexampleofaforgetfulfunctor,wheresomeadditionalstructureis
                 forgotten. Anotherexampleofaforgetfulfunctoris Mod Abfrom A-modules  
                                                    A                               
                 toabeliangroups,rememberingonlytheabeliangroupstructureofthe A-module.
                                                      →                               
                 1.1.13. Topological examples. Examples of covariant functors include the funda-
                 mentalgroupfunctorϑ ,whichsendsatopologicalspace Xwithchoiceofapoint
                                1                                                   
                 x   Xtoagroupϑ (X,x )(whataretheobjectsandmorphismsofthesourcecate-
                  0          1   0                                                  
                   ↑                                                                
                 gory?),andtheithhomologyfunctor Top Ab,whichsendsatopologicalspace X 
                 toitsithhomologygroup H                                             
                                   i                                                
                                   (X,Z). Thecovariancecorrespondstothefactthata    
                 (continuous)morphismofpointedtopolo → gicalspacesϖ: X Y withϖ(x      
                                                              0                     
                                                               )=y                  
                                                                  0                 
                 induces a map of fundamental groups ϑ (X,x ) ϑ (Y,y ), and similarly for
                                           1  0    1  0                             
                 homologygroups.                       →                              
                                                 →                                    
                 1.1.14. Example. Suppose A is an object in a category C. Then there is a func-
                 tor h A: C Sets sending B C to Mor(A,B), and sending f: B B to      
                                                            1   2                   
                                     ↑                                              
                 Mor(A,B ) Mor(A,B )describedby                                     
                       1        2                                                   
                          →                                     →                       
                              [g: A B ]! $$[f g: A B B ].                           
                          →           1       ↔      1   2                              
                 Thisseeminglysillyfunctorendsupsurprisinglybeinganimportantconcept.
                                  →               →    →                                  
                 1.1.15. Definitions. If F: A Band G: B C arecovariantfunctors,thenwe 
                 defineafunctor G F: A C (thecompositionof Gand F)intheobviousway.     
                              ↔                                                       
                 Compositionoffunctorsisas → sociativeinane → videntsense.              
                    A covariant functor F  →  : A B is faithful if for all A,A  →  A, the map
                                                          ↑                         
                 Mor (A,A ) Mor (F(A),F(A ))isinjective,andfullifitissurjective. Afunctor
                    A     →     B        →                                              
                 thatisfullandfaithfulisfully → faithful. (Forvariousphilosophicalreasons, the
                 notion of “ful → l” functor on its own is unimportant; “fully faithful” is the useful\n\n--- PAGE 33 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 33
                                                                                    
                 notion.) Asubcategoryi: A Bisafullsubcategoryifiisfull. (Inclusionsare
                 alwaysfaithful,sothereisnoneedforthephrase“faithfulsubcategory”.) Thusa
                 subcategory A                                                       
                            →                                                         
                            of A isfulli → fandonlyifforall A,B                         
                                                   ↑                                
                                                    obj(A                           
                                                         →                            
                                                        ),Mor                       
                                                            A →                       
                                                              (A,B) =               
                 Mor (A,B). Forexample,theforgetfulfunctor Vec Setsisfaithful,butnotfull;
                    A                           k                                   
                 andif Aisaring,thecategoryoffinitelygenerated A-modulesisafullsubcategory
                 ofthecategory Mod A of A-modules.  →                                   
                 1.1.16. Definition. A contravariant functor is defined in the same way as a
                 covariant functor, except the arrows switch directions: in the above language,
                 F(A   A )isnowanarrowfrom F(A )to F(A ). (Thus F(m m ) = F(m )        
                    1   2                 2    1        2  1     1                  
                                                          ↔          ↔                  
                 F(m ),not F(m ) F(m ).)                                             
                    2      2    1                                                   
                             ↔                                                        
                    It → iswisetostatewhetherafunctoriscovariantorcontravariant,unlessthe
                 context makes it very clear. If it is not stated (and the context does not make it
                 clear),thefunctorisoftenassumedtobecovariant.                      
                    Sometimes people describe a contravariant functor C D as a covariant
                 functor Copp D,where Coppisthesamecategoryas C exceptthatthearrowsgo  
                 intheoppositedirection. Here Coppissaidtobetheopposite → categoryto C. 
                    Onecand → efinefullness,etc.forcontravariantfunctors,andyoushoulddoso.
                 1.1.17. Linearalgebraexample. If Vec isthecategoryofk-vectorspaces(introduced
                                       k                                            
                 in Example1.1.3),thentakingdualsgivesacontravariantfunctor()∨: Vec Vec .
                                                             k    k                 
                                                         ·                          
                 Indeed,toeachlineartransformationf: V W,wehaveadualtransformation  
                 f∨: W∨ V∨,and(f g)∨ =g∨ f∨.                                        
                                                               →                      
                                ↔        ↔                                              
                                             →                                        
                 1.1.18. Topologicalexample(cf. Example1.1.13)forthosewhohaveseencohomology. The
                        →                                                             
                 ithcohomologyfunctor Hi(,Z): Top Abisacontravariantfunctor.         
                                  ·                                                 
                 1.1.19. Example. Thereisacontravariantfunctor Top Ringstakingatopological
                                         →                                            
                 space X to the ring of real-valued continuous functions on X. A morphism of
                 topological spaces X Y (a continuous map) indu → ces the pullback map from
                 functionson Y tofunctionson X.                                       
                                →                                                     
                 1.1.20. Example (the functor of points, cf. Example 1.1.14). Suppose A is an object
                 of a category C. Then there is a contravariant functor h : C Sets sending
                                                     A                              
                 B   C to Mor(B,A), and sending the morphism f: B B to the morphism 
                                                   1   2                            
                   ↑                                                                
                 Mor(B                                                              
                     2                                                              
                      ,A)  Mor(B                                                    
                               1                                                    
                               ,A)via                                               
                                                          →                           
                                                     →                                
                              [g: B A]!  $$[g f: B B A].                            
                          →        2          ↔   1   2                                 
                 Thisexampleinitiallylooksweirdanddifferent,but Examples1.1.17and1.1.19
                                   →              →     →                                 
                 maybeinterpretedasspecialcases;doyouseehow? Whatis Aineachcase? This
                 functormightreasonablybecalledthefunctorofmaps(to A),butisactuallyknown
                 as the functor of points. We will meet this functor again in §1.2.11 and (in the
                 categoryofschemes)in Definition7.3.10.                              
                 1.1.21. ωNaturaltransformations(andnaturalisomorphisms)ofcovariantfunc-
                 tors,andequivalencesofcategories.                                  
                    (Thisnotionwon’tcomeupinanessentialwayuntilatleast Chapter7,soyou
                 shouldn’treadthissectionuntilthen.) Suppose Fand Garetwocovariantfunctors
                 from A to B. Anaturaltransformationofcovariantfunctors F Gisthedataof 
                 amorphismm : F(A) G(A)foreach A A suchthatforeachf: A A in A,        
                          A                                     →                     
                                           ↑                                        
                                                         →                            
                                →                              →\n\n--- PAGE 34 ---\n34    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 thediagram                                                         
                                                                                    
                                         F(f)                                       
                                     F(A)   $$F(A )                                 
                                               →                                      
                                    m A        m A →                                   
                                      %%      %%                                    
                                     G(A)  $$G(A )                                  
                                                →                                     
                                         G(f)                                       
                 commutes. Anaturalisomorphismoffunctorsisanaturaltransformationsuch
                 thateachm isanisomorphism. (Wemakeanalogousdefinitionswhen Fand G    
                         A                                                          
                 arebothcontravariant.)                                             
                    Thedataoffunctors F: A B and F : B A suchthat F F isnaturally      
                                             →                →                         
                                                          ↔                           
                 isomorphic to the identity functor id on B and F F is naturally isomorphic
                                         B        →   ↔                                 
                 toid                                                               
                    A                                                               
                      issaidtobeanequivale → nceofcategorie → s. Therightnotionofwhentwo
                 categoriesare“essentiallythesame”isnotisomorphism(afunctorgivingbijections
                 ofobjectsandmorphisms)butequivalence. Exercises1.1. Cand1.1. Dmightgive
                 yousomevaguesenseofthis. Laterexercises(forexample,that“rings”and“affine
                 schemes”areessentiallythesame,oncearrowsarereversed,Exercise7.3. E)may
                 helptoo.                                                           
                    Two examples might make this strange concept more comprehensible. The
                 doubledualofafinite-dimensionalvectorspace V isnot V,butwelearnearlyto
                 saythatitiscanonicallyisomorphicto V. Wecanmakethatpreciseasfollows. Let
                 f.d. Vec bethecategoryoffinite-dimensionalvectorspacesoverk. Notethatthis
                     k                                                              
                 categorycontainsoodlesofvectorspacesofeachdimension.               
                 1.1. C. EXERCISE. Let()∨∨: f.d. Vec f.d. Vec bethedoubledualfunctorfrom
                                ·      k      k                                     
                 thecategoryoffinite-dimensionalvectorspacesoverktoitself. Showthat()∨∨
                                                                ·                   
                 is naturally isomorphic to the identi → ty functor on f.d. Vec . (Without the finite-
                                                     k                              
                 dimensionalityhypothesis,weonlygetanaturaltransformationoffunctorsfrom
                 idto()∨∨.)                                                         
                     ·                                                              
                    Let V bethecategorywhoseobjectsarethek-vectorspacesknforeachn 0  
                                                                 ↘                  
                 (thereisonevectorspaceforeachn),andwhosemorphismsarelineartransfor-
                 mations. Theobjectsof V canbethoughtofasvectorspaceswithbases,andthe
                 morphismsasmatrices. Thereisanobviousfunctor V f.d. Vec ,aseachknisa 
                                                         k                          
                 finite-dimensionalvectorspace.                                     
                                                    →                                 
                 1.1. D. EXERCISE. Show that V f.d. Vec gives an equivalence of categories,
                                            k                                       
                 bydescribingan“inverse”functor. (Recallthatwearebeingcavalieraboutset-
                 theoretic assumptions, see Cautio → n 0.3.1, so feel free to simultaneously choose
                 basesforeachvectorspaceinf.d. Vec . Tomakethisprecise,youwillneedtouse
                                        k                                           
                 Go¨del-Bernayssettheoryorelsereplacef.d. Vec withaverysimilarsmallcategory,
                                             k                                      
                 butwewon’tworryaboutthis.)                                         
                 1.1.22. ωω Aside for experts. Your argument for Exercise 1.1. D will show that
                 (moduloset-theoreticissues)thisdefinitionofequivalenceofcategoriesisthesame
                 asanotheronecommonlygiven: acovariantfunctor F: A Bisanequivalence  
                 ofcategoriesifitisfullyfaithfulandeveryobjectof Bisisomorphictoanobject
                 oftheform F(A)forsome A A (Fisessentiallysurjecti → ve,atermwewillnot  
                                   ↑                                                
                 need).\n\n--- PAGE 35 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 35
                                                                                    
                     1.2Universalpropertiesdetermineanobjectuptounique              
                                     isomorphism                                    
                                                                                    
                                                                                    
                    Givensomecategorythatwecomeupwith,weoftenwillhavewaysofpro-     
                 ducing new objects from old. In good circumstances, such a definition can be
                 madeusingthenotionofauniversalproperty. Informally,wewishthattherewere
                 anobjectwithsomeproperty. Wefirstshowthatifitexists,thenitisessentially
                 unique,ormoreprecisely,isuniqueuptouniqueisomorphism. Thenwegoabout
                 constructinganexampleofsuchanobjecttoshowexistence.                
                    Explicitconstructionsaresometimeseasiertoworkwiththanuniversalprop-
                 erties,butwithalittlepractice,universalpropertiesareusefulinprovingthings
                 quicklyandslickly. Indeed,whenlearningthesubject,peopleoftenfindexplicit
                 constructions more appealing, and use them more often in proofs, but as they
                 becomemoreexperienced,theyfinduniversalpropertyargumentsmoreelegant
                 andinsightful.                                                     
                 1.2.1. Productsweredefinedbyauniversalproperty. Wehaveseenoneimpor-
                 tantexampleofauniversalpropertyargumentalreadyin§1.0.1: products. You
                 should go back and verify that our discussion there gives a notion of product
                 in any category, and shows that products, if they exist, are unique up to unique
                 isomorphism.                                                       
                 1.2.2. Initial,final,andzeroobjects. Herearesomesimplebutusefulconceptsthat
                 willgiveyoupracticewithuniversalpropertyarguments. Anobjectofacategory
                 C isaninitialobjectifithaspreciselyonemaptoeveryobject. Itisafinalobjectif
                 ithaspreciselyonemapfromeveryobject. Itisazeroobjectifitisbothaninitial
                 objectandafinalobject.                                             
                 1.2. A. EXERCISE. Showthatanytwoinitialobjectsareuniquelyisomorphic. Show
                 thatanytwofinalobjectsareuniquelyisomorphic.                       
                    Inotherwords,ifaninitialobjectexists,itisuniqueuptouniqueisomorphism,
                 andsimilarlyforfinalobjects. This(partially)justifiesthephrase“theinitialobject”
                 rather than “an initial object”, and similarly for “the final object” and “the zero
                 object”. (Convention: we often say “the”, not “a”, for anything defined up to
                 uniqueisomorphism.)                                                
                 1.2. B. EXERCISE. Whataretheinitialandfinalobjectsin Sets,Rings,and Top(if
                 theyexist)? Howaboutinthetwoexamplesof§1.1.9?                      
                                                                                    
                 1.2.3. Localizationofringsandmodules. Anotherimportantexampleofadefi-
                 nitionbyuniversalpropertyisthenotionoflocalizationofaring. Wefirstreview
                 a constructive definition, and then reinterpret the notion in terms of universal
                 property. Amultiplicativesubset Sofaring Aisasubsetclosedundermultipli-
                 cationcontaining1. Wedefinearing S!1A. Theelementsof S!1Aareoftheform
                 a/s where a A and s S, and where a /s = a /s if (and only if) for some
                                            1 1  2 2                                
                          ↑      ↑                                                  
                 s  S, s(s a !s a ) = 0. We define (a /s )+(a /s ) = (s a +s a )/(s s ),
                       2 1  1 2           1 1    2 2   2 1  1 2 1 2                 
                   ↑                                                                
                 and (a /s ) (a /s ) = (a a )/(s s ). (If you wish, you may check that this
                      1 1   2 2    1 2  1 2                                         
                          ↗                                                           
                 equalityoffractionsreallyisanequivalencerelationandthetwobinaryoperations
                 onfractionsarewell-definedonequivalenceclassesandmake S!1Aintoaring.)\n\n--- PAGE 36 ---\n36    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 Wehaveacanonicalringmap                                            
                                                                                    
                 (1.2.3.1)            A    $$S!1A                                   
                 givenbya a/1. Notethatif0 S,S!1Aisthe0-ring.                       
                        ⇐            ↑                                              
                    Therearetwoparticularlyimportantflavorsofmultiplicativesubsets. Thefirst
                 is{1,f,f2,.. → .},wheref A. Thislocalizationisdenoted A               
                                                     f                              
                                                     . (Canyoudescribean            
                              ∼   ↑                                                   
                 isomorphism A  A[t]/(tf!1)?) Thesecondis A\p,wherepisaprimeideal.    
                           f                                                        
                 Thislocalization S!1Aisdenoted A . (Notationalwarning: Ifpisaprimeideal,
                                        p                                           
                 then A                                                              
                      p                                                             
                       meansyo↑u → ’reallowedtodividebyelementsnotinp. However,iff A, 
                                                                ↑                   
                 A meansyou’reallowedtodividebyf. Thiscanbeconfusing. Forexample,if(f)
                   f                                                                
                 isaprimeideal,then A =A .)                                          
                                f                                                   
                                  →                                                   
                                   (f)                                              
                    Warning: sometimeslocalizationisfirstintroducedinthespecialcasewhere A
                 isanintegraldomainand0 / S. Inthatcase,Aε S!1A,butthisisn’talwaystrue,
                                  ↑                                                 
                 asshownbythefollowingexercise. (Butwewillseethatnoninjectivelocalizations
                 needn’tbepathological,andwecansometimesu → nderstandthemgeometrically,see
                 Exercise3.2. L.)                                                    
                 1.2. C. EXERCISE. Show that A S!1A is injective if and only if S contains no
                 zerodivisors. (Azerodivisorofaring Aisanelementasuchthatthereisanonzero
                 elementbwithab=0. Theother → elementsof Aarecallednon-zerodivisors. For
                 example,aninvertibleelementisneverazerodivisor. Counter-intuitively,0isa
                 zerodivisorineveryringbutthe0-ring. Moregenerally,if Misan A-module,then
                 a  Aisazerodivisorfor Mifthereisanonzerom Mwitham=0. Theother       
                   ↑                             ↑                                  
                 elementsof Aarecallednon-zerodivisorsfor M. Equivalently,andveryusefully,
                 a  A is a non-zerodivisor for M if and only if a : M M is an injection, or
                   ↑                            ↗                                     
                 equivalentlyinthelanguageof§1.5,if                                 
                                                     →                                
                                             a                                      
                                    0    $$M ↓ $$M                                  
                 isexact.)                                                          
                    If Aisanintegraldomainand S=A\{0},then S!1Aiscalledthefractionfield
                 of A,whichwedenote K(A). Thepreviousexerciseshowsthat Aisasubringofits
                 fractionfield K(A). Wenowreturntothecasewhere Aisageneral(commutative)
                 ring.                                                              
                 1.2. D. EXERCISE. Verifythat A S!1Asatisfiesthefollowinguniversalproperty:
                 S!1Aisinitialamong A-algebras Bwhereeveryelementof Sissenttoaninvertible
                 elementin B. (Recall: thedatao → f“an A-algebra B”and“aringmap A B”are   
                 the same.) Translation: any map A B where every element of S is sent to an
                 invertibleelementmustfactoruniquelythrough A S!1A. Anothertra → nslation:
                 aringmapoutof S!1Aisthesamet → hingasaringmapfrom Athatsendsevery      
                 elementof Stoaninvertibleelement. Furthermore, → an S!1A-moduleisthesame
                 thingasan A-moduleforwhichs : M Misan A-moduleisomorphismforall      
                                       ↗ ·                                            
                 s  S.                                                              
                  ↑                                                                 
                    In fact, it is cleaner to define A S → !1A by the universal property, and to
                 showthatitexists,andtousetheuniversalpropertytocheckvariousproperties
                 S!1Ahas. Let’sgetsomepracticew → iththisbydefininglocalizationsofmodules
                 byuniversalproperty. Suppose Misan A-module. Wedefinethe A-modulemap\n\n--- PAGE 37 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 37
                                                                                    
                 ϖ: M  S!1Masbeinginitialamong A-modulemaps M Nsuchthatelements       
                 of S are invertible in N (s : N N is an isomorphism for all s S). More
                                   ↗ ·                        ↑                       
                 precise → ly,anysuchmapα: M Nfactorsuniquelythrou → ghϖ:               
                                        →  ε                                          
                                      M    $$S!1M                                   
                                     →                                                
                                              !                                     
                                         ϑ   ↑                                      
                                            ’’ %%                                   
                                            N                                       
                 (Translation: M S!1Misuniversal(initial)among A-modulemapsfrom Mto   
                 modulesthatareactually S!1A-modules. Canyoumakethisprecisebydefining
                 clearlytheobject → sandmorphismsinthiscategory?)                     
                    Notice: (i) this determines ϖ: M S!1M up to unique isomorphism (you
                 shouldthinkthroughwhatthismeans);(ii)wearedefiningnotonly S!1M,but  
                 alsothemapϖatthesametime;and( → iii)essentiallybydefinitionthe A-module
                 structureon S!1Mextendstoan S!1A-modulestructure.                    
                 1.2. E. EXERCISE. Show that ϖ: M S!1M exists, by constructing something
                 satisfying the universal property. Hint: define elements of S!1M to be of the
                 formm/swherem Mands  S, → andm                                       
                                            1                                       
                                             /s                                     
                                              1                                     
                                               = m                                  
                                                  2                                 
                                                   /s                               
                                                    2                               
                                                     ifandonlyifforsome             
                              ↑      ↑                                              
                 s  S,s(s m !s m )=0. Definetheadditivestructureby(m /s )+(m /s )=  
                       2 1  1 2                         1 1   2 2                   
                  ↑                                                                 
                 (s m +s m )/(s s ),andthe S!1A-modulestructure(andhencethe A-module  
                   2 1  1 2 1 2                                                     
                 structure)isgivenby(a /s ) (m /s )=(a m )/(s s ).                  
                                1 1   2 2   1 2  1 2                                
                                    ·                                               
                 1.2. F. EXERCISE.                                                    
                 (a) Show that localization commutes with finite products, or equivalently, with
                 finite direct sums. In other words, if M , ..., M are A-modules, describe an
                                           1    n                                   
                 isomorphism (of A-modules, and of S!1A-modules) S!1(M M )          
                                                        1      n                    
                                                          ↗  ···  ↗                     
                 S!1M      S!1M .                                                   
                     1         n                                                    
                       ↗ ··· ↗                                                          
                 (b)Showthatlocalizationcommuteswitharbitrarydirectsums.  →           
                 (c)Showthat“localizationdoesnotnecessarilycommutewithinfiniteproducts”:
                 theobviousmap S!1( M )  S!1M inducedbytheuniversalpropertyof        
                                i i    i    i                                       
                 localizationisnotalwaysanisomorphism. (Hint: (1,1/2,1/3,1/4,...) Q Q
                               ↓      ↓                     ↑   ↗    ↗                  
                   .)                →                                                
                 ···                                                                
                 1.2.4. Remark. Localization does not always commute with Hom, see Exam-
                 ple1.5.10. But Exercise1.5. Hwillshowthatingoodsituations(ifthefirstargument
                 of Homisfinitelypresented),localizationdoescommutewith Hom.          
                 1.2.5. Tensor products. Another important example of a universal property
                 constructionisthenotionofatensorproductof A-modules                 
                            :    obj(Mod ) obj(Mod ) $$obj(Mod )                    
                           A          A       A          A                          
                           ⇒               ↗                                            
                                      (M,N)!        $$M  N                          
                                                       A                            
                                                       ⇒                              
                 The subscript A is often suppressed when it is clear from context. The tensor
                 productisoftendefinedasfollows. Supposeyouhavetwo A-modules Mand N.   
                 Thenelementsofthetensorproduct M Narefinite A-linearcombinationsof   
                                           A                                        
                                           ⇒                                          
                 symbolsm n(m M,n N),subjecttorelations(m +m ) n=m n+m n,           
                                                  1  2     1    2                   
                         ⇒    ↑    ↑                     ⇒       ⇒      ⇒\n\n--- PAGE 38 ---\n38    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 m  (n +n )=m n +m  n ,a(m n)=(am) n=m  (an)(wherea A,              
                      1  2     1     2                                              
                    ⇒           ⇒       ⇒       ⇒         ⇒      ⇒          ↑                   
                 m ,m   M,n ,n N). Moreformally,M Nisthefree A-modulegenerated       
                   1 2     1 2                A                                     
                      ↑       ↑               ⇒                                       
                 by M  N,quotientedbythesubmodulegeneratedby(m +m ,n)!(m ,n)!        
                                                     1   2     1                    
                      ↗                                                               
                 (m ,n),(m,n +n )!(m,n )!(m,n ),a(m,n)!(am,n),anda(m,n)!(m,an)      
                   2      1  2     1     2                                          
                 fora A,m,m ,m  M,n,n ,n N. Theimageof(m,n)inthisquotientis         
                           1  2      1 2                                            
                     ↑         ↑        ↑                                           
                 m  n.                                                              
                    ⇒                                                                 
                    If Aisafieldk,werecoverthetensorproductofvectorspaces.           
                 1.2. G. EXERCISE(IFYOUHAVEN’TSEENTENSORPRODUCTSBEFORE). Showthat     
                             ∼                                                        
                 Z/(10) Z/(12)=Z/(2).(Thisexerciseisintendedtogivesomehands-onpractice
                       ⇒ Z                                                            
                 withtensorproducts.)                                               
                 1.2. H. IMPORTANTEXERCISE: RIGHT-EXACTNESSOF()                       
                                                    A                               
                                                     N. Showthat()                  
                                                                 A                  
                                                                  N                 
                                                 ·  ⇒           ·  ⇒                    
                 gives a covariant functor Mod Mod . Show that () N is a right-exact
                                    A      A          A                             
                                                    ·  ⇒                              
                 functor,i.e.,if                                                    
                                    M   M  M    0                                   
                                      →  →        →  →                                      
                 isanexactsequenceof A-modules(whichmeansf: M M issurjective,and M    
                                                       →  →             →                 
                 surjectsontothekerneloff;see§1 → .5),th → enthei → nducedsequence        
                              M    N  M   N  M    N →   0                             
                                 →  A      A      →  →  A                                 
                                 ⇒         ⇒         ⇒                                    
                 isalsoexact. Thisexerciseisrepeatedin Exercise1.5. G,butyoumaygetalotoutof
                 doingitnow. (Youwillberemin → dedofthed → efinitionofr → ight-exactnessin§1.5.6.)
                    Incontrast,youcanquicklycheckthattensorproductisnotleft-exact: tensor
                 theexactsequenceof Z-modules                                        
                                       2                                            
                               0   $$Z ↓ $$Z $$Z/(2) $$0                            
                 with Z/(2).                                                         
                    Theconstructivedefinitionof isaweirddefinition,andreallythe“wrong”
                                       ⇒                                              
                 definition. Tomotivateabetterone: noticethatthereisanatural A-bilinearmap
                 M   N  M    N. (If M,N,P Mod , a map f: M N P is A-bilinear if     
                           A              A                                         
                    ↗        ⇒            ↑             ↗                                 
                 f(m +m ,n) = f(m ,n)+f(m ,n), f(m,n +n ) = f(m,n )+f(m,n ), and    
                    1   2      1      2      1  2       1      2                    
                 f(am,n)                                                            
                       →                                                              
                       =f(m,an)=af(m,n).) Any A-bilinearmap M N                       
                                                       →                              
                                                         Pfactorsthrough            
                                                     ↗                                
                 thetensorproductuniquely: M N M N P. (Thinkthisthrough!)           
                                            A                                       
                                      ↗       ⇒                                         
                    We can take this as the definition of the tensor product  → as follows. It is an
                 A-module T along with an A-bilinea → r map t: M  →  N T, such that given any
                                                 ↗                                    
                 A-bilinearmapt : M N T , thereisaunique A-linearmapf: T T such      
                             →          →                           →                     
                                ↗                                                     
                 thatt                                                              
                      →                                                               
                      =f t.                                                         
                                                    →                                 
                         ↔                                                            
                                           t                                        
                                   → M  N         $$T          →                        
                                      ↗                                               
                                       t →   ’’ (( ↑ !f                               
                                           T                                        
                                             →                                        
                 1.2. I. EXERCISE. Showthat(T,t: M N T)isuniqueuptouniqueisomorphism. 
                                        ↗                                             
                 Hint: firstfigureoutwhat“uniqueuptouniqueisomorphism”meansforsuch  
                 pairs,usingacategoryofpairs(T,t). The → nfollowtheanalogousargumentforthe
                 product.                                                           
                    In short: given M and N, there is an A-bilinear map t: M N M N, 
                                                                A                   
                                                         ↗        ⇒                     
                 uniqueuptouniqueisomorphism,definedbythefollowinguniversalproperty:for
                                                             →\n\n--- PAGE 39 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 39
                                                                                    
                 any A-bilinearmapt : M N T thereisaunique A-linearmapf: M N T        
                               →         →                       A      →                 
                                  ↗                            ⇒                        
                 suchthatt =f t.                                                    
                         →                                                            
                            ↔                                                         
                    Aswithalluniversalprop → ertyarguments,thisargumentshowsunique → ness
                 assumingexistence. Toshowexistence,weneedanexplicitconstruction.   
                 1.2. J. EXERCISE. Showthattheconstructionof§1.2.5satisfiestheuniversalproperty
                 oftensorproduct.                                                   
                    Thethreeexercisesbelowareusefulfactsabouttensorproductswithwhich
                 youshouldbefamiliar.                                               
                 1.2. K. IMPORTANTEXERCISE.                                           
                 (a) If M is an A-module and A B is a morphism of rings, give B M the
                                                              A                     
                                                              ⇒                       
                 structureofa B-module(thisispartoftheexercise). Showthatthisdescribesa
                 functor Mod A Mod B .  →                                              
                 (b)(tensorproductofrings)Iffurther A Cisanothermorphismofrings,show 
                 that B                                                              
                      A                                                             
                        Cha → sanaturalstructureofaring. Hint: multiplicationwillbegivenby
                      ⇒                                                               
                 (b                                                                 
                   1                                                                
                     c                                                              
                      1                                                             
                      )(b                                                           
                        2                                                           
                          c                                                         
                           2                                                        
                            )=(b                                                    
                               1                                                    
                                b                                                   
                                 2                                                  
                                 ) (c                                               
                                     1                                              
                                     c                                              
                                      2                                             
                                       ). (Exe → rcise1.2. Uwillinterpretthisconstruction
                     ⇒      ⇒          ⇒                                                  
                 asafiberedcoproduct.)                                              
                 1.2. L. IMPORTANT EXERCISE. If S is a multiplicative subset of A and M is an
                 A-module, describe a natural isomorphism (S!1A) M  ∼  S!1M (as S!1A- 
                                                   A                                
                                                   ⇒    ⇑                             
                 modulesandas A-modules).                                            
                                                        →                             
                 1.2. M. EXERCISE ( COMMUTES WITH ). Showthattensorproductscommute    
                              ⇒            ⇓                                          
                 witharbitrarydirectsums: if Mand{N } areall A-modules,describeanisomor-
                                         i i I                                      
                                           ↔                                          
                 phism                                                              
                                           ∼                                          
                               M  (   N )  $$  (M  N ).                             
                                    i I i    i I    i                               
                                  ⇒  ⇓  ↔       ⇓  ↔    ⇒                                   
                 1.2.6. Essential Example: Fiberedproducts. Supposewehavemorphismsα: X
                 Zandβ: Y Z(inanycategory). Thenthefiberedproduct(orfibredproduct)is
                 anobject X                                                          
                          Z                                                         
                           Y alongwithmorphismspr                                   
                                            X                                       
                                             : X                                    
                                                Z                                   
                                                 Y  Xandpr                          
                                                          Y                         
                                                           : X                      
                                                              Z                     
                                                               Y                    
                                                                   →                  
                                                                  Y,                
                          ↗                       ↗               ↗                       
                 wherethetw → ocompositionsα pr                                       
                                       X                                            
                                        ,β pr                                       
                                            Y                                       
                                             : X                                    
                                                Z                                   
                                                 Y  Zagree,suchthatgiven            
                                     ↔       ↔      ↗                                     
                 anyobject W withmapsto Xand Y (whosecompositio → nsto Zagree),thesem → aps 
                 factorthroughsomeunique W X                                         
                                         Z                                          
                                          Y:                                        
                                                   →                                  
                                         ↗                                            
                                  W                                                 
                                      →                                               
                                       !                                            
                                      ↑                                             
                                         ’’                                         
                                        X  Y    **$$Y                               
                                          ↗  Z pr Y                                    
                                           pr X   ϖ                                  
                                         )) %%   %%                                 
                                             ϑ                                      
                                          X     $$Z                                 
                 (Warning: thedefinitionofthefiberedproductdependsonαandβ,eventhough
                 theyareomittedfromthenotation X Y.)                                 
                                         Z                                          
                                         ↗                                            
                    Bytheusualuniversalpropertyargument,ifitexists,itisuniqueuptounique
                 isomorphism. (Youshouldthinkthisthroughuntilitiscleartoyou.) Thustheuse
                 ofthephrase“thefiberedproduct”(ratherthan“afiberedproduct”)isreasonable,\n\n--- PAGE 40 ---\n40    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 andweshouldreasonablybeallowedtogiveitthename X Y. Weknowwhat       
                                                       Z                            
                                                       ↗                              
                 mapstoitare: theyarepreciselymapsto Xandmapsto Y thatagreeasmapsto Z. 
                 1.2.7. Definition. As an example, if ϑ: X Y is a morphism, and the fibered
                 product X Xexists,thenthisdeterminesadiagonalmorphismφ : X X X.     
                         Y                                π      Y                  
                         ↗                                         ↗                    
                 Thediagonalmorphismwillturnouttobea → veryusefulnotion.              
                    Dependingonyourreligion,thediagram        →                       
                                     X   Y                                          
                                           pr Y                                      
                                             $$Y                                    
                                        Z                                           
                                        ↗                                             
                                     pr X       ϖ                                    
                                       %%     %%                                    
                                          ϑ                                         
                                       X     $$Z                                    
                 iscalledafibered/pullback/Cartesiandiagram/square(sixpossibilities—andeven
                 morearepossibleifyouprefer“fibred”to“fibered”).                    
                    Therightwaytointerpretthenotionoffiberedproductisfirsttothinkabout
                 whatitmeansinthecategoryofsets.                                    
                 1.2. N. EXERCISE(FIBEREDPRODUCTSOFSETS). Showthatin Sets,             
                              X  Y ={(x,y) X Y : α(x)=β(y)}.                        
                                Z                                                   
                                ↗         ↑  ↗                                          
                 Moreprecisely,showthattherightside,equippedwithitsevidentmapsto Xand
                 Y,satisfiestheuniversalpropertyofthefiberedproduct. (Thiswillhelpyoubuild
                 intuitionforfiberedproducts.)                                      
                 1.2. O. EXERCISE. If Xisatopologicalspace,showthatfiberedproductsalways
                 exist in the category of open sets of X, by describing what a fibered product is.
                 (Hint: ithasaone-worddescription.)                                 
                 1.2. P. EXERCISE. If Zisthefinalobjectinacategory C,and X,Y C,showthat  
                                                          ↑                         
                 “X  Y = X Y”: “the”fiberedproductover Zisuniquelyisomorphicto“the”  
                    Z                                                               
                    ↗        ↗                                                          
                 product. Assumeallrelevant(fibered)productsexist. (Thisisanexerciseabout
                 unwindingthedefinition.)                                           
                 1.2. Q. USEFUL EXERCISE: TOWERS OF CARTESIAN DIAGRAMS ARE CARTESIAN 
                  DIAGRAMS. Ifthetwosquaresinthefollowingcommutativediagramare Cartesian
                 diagrams,showthatthe“outsiderectangle”(involving U,V,Y,and Z)isalsoa 
                 Cartesiandiagram.                                                  
                                       U    $$V                                     
                                        %%   %%                                     
                                       W    $$X                                     
                                        %%   %%                                     
                                       Y    $$Z                                     
                 1.2. R. EXERCISE. Givenmorphisms X                                    
                                         1                                          
                                           Y,X                                      
                                              2                                     
                                                 Y,and Y Z,showthatthere             
                 isanaturalmorphism X X X   X ,assumingthatbothfiberedproducts       
                                1 Y 2   1 Z 2                                       
                                  ↗         ↗                                           
                 exist. (Thisistrivialonceyoufigureoutw → hatitis → saying. The → pointofthisexercise
                 istoseewhyitistrivial.)  →\n\n--- PAGE 41 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 41
                                                                                    
                 1.2. S. IMPORTANTEXERCISE: THEDIAGONAL-BASE-CHANGEDIAGRAM. Suppose   
                 wearegivenmorphisms X ,X Y and Y Z. Showthatthefollowingdiagram      
                                  1 2                                               
                 isa Cartesiansquare.                                                
                                      →        →                                        
                                  X    X    $$X X                                   
                                   1 Y 2     1 Z 2                                  
                                     ↗           ↗                                      
                                     %%        %%                                   
                                     Y       $$Y Y                                  
                                               Z                                    
                                               ↗                                      
                 Assumeallrelevant(fibered)productsexist. (Ifthisexerciseistoohardnow,you
                 cantryitagainat Exercise1.3. B.)Youwillappreciatehowusefulthisdiagramis
                 whenyourepeatedlyusethediagonalmorphisminproofsandconstructions.   
                    Ifyoulikedthisproblem,youmayenjoy Exercise11.1. C.                
                 1.2.8. Coproducts. Definecoproductinacategorybyreversingallthearrowsinthe
                 definitionofproduct. Definefiberedcoproductinacategorybyreversingallthe
                 arrowsinthedefinitionoffiberedproduct. Coproductisdenotedby .      
                 1.2. T. EXERCISE. Showthatcoproductfor Setsisdisjointunion. Thi ↔ siswhywe
                 usethenotation fordisjointunion.                                   
                 1.2. U. EXERCISE. ↔ Suppose A B and A C are two ring morphisms, so in 
                 particular Band Care A-modules. Recall(Exercise1.2. K)that B Chasaring  
                                                          A                         
                                                          ⇒                           
                 structure. Showthatthereisana → turalmorph → ism B B                    
                                                     A                              
                                                      Cgivenbyb b 1.                
                                                    ⇒           ⇐   ⇒                   
                 (Thisisnotnecessarilyaninclusion;see Exercise1.2. G.)Similarly,thereisanatural
                 morphism C B                                                        
                             A                                                      
                               C. Showthatthisgivesafibere → dcoproductonrings, → i.e.,that
                             ⇒                                                        
                                     B   C++  C                                     
                          →               ⇒ ,, A   ,,                                   
                                       B++    A                                     
                 satisfiestheuniversalpropertyoffiberedcoproduct.                   
                 1.2.9. Monomorphismsandepimorphisms.                               
                 1.2.10. Definition. A morphism ϑ: X Y is a monomorphism if any two 
                 morphisms µ : Z X and µ : Z X such that ϑ µ = ϑ µ must satisfy     
                          1         2               1     2                         
                                                   ↔       ↔                            
                 µ                                                                  
                  1                                                                 
                   =µ                                                               
                      2                                                             
                      . Inotherwords,thereisatmoston → ewayoffillinginthedottedarrowso
                 thatthediagram  →        →                                             
                                        Z                                           
                                       1                                            
                                        ↗                                             
                                        %%   --                                     
                                        X    $$Y                                    
                                           π                                        
                 commutes — for any object Z, the natural map Mor(Z,X) Mor(Z,Y) is an
                 injection. Intuitively,itisthecategoricalversionofaninjectivemap,andindeed
                 thisnotiongeneralizesthefamiliarnotionofinjectivemapso → fsets. (Thereason
                 wedon’tusetheword“injective”isthatinsomecontexts,“injective”willhave
                 anintuitivemeaningwhichmaynotagreewith“monomorphism”. Oneexample:  
                 in the category of divisible groups, the map Q Q/Z is a monomorphism but
                                                →\n\n--- PAGE 42 ---\n42    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 notinjective. Thisisalsothecasewith“epimorphism”(tobedefinedshortly)vs.
                 “surjective”.)                                                     
                                                                                    
                 1.2. V. EXERCISE. Showthatthecompositionoftwomonomorphismsisamonomor-
                 phism.                                                             
                 1.2. W. EXERCISE. Provethatamorphismϑ: X Y isamonomorphismifand     
                 only if the fibered product X X exists, and the induced diagonal morphism
                                     Y                                              
                                     ↗                                                
                 φ                                                                  
                  π                                                                 
                   : X X                                                            
                         Y                                                          
                          X(Definition1.2.7)isanisomorphi → sm. Wemaythentakethisasthe
                         ↗                                                            
                 definitionofmonomorphism.(Monomorphismsaren’tcentraltofuturediscussions,
                 althou → ghtheywillcomeupagain. Thisexerciseisjustgoodpractice.)     
                 1.2. X. EASYEXERCISE. Weusethenotationof Exercise1.2. R. Showthatif Y Z  
                 isamonomorphism,thenthemorphism X X X  X youdescribedin             
                                            1 Y 2  1  Z 2                           
                                              ↗        ↗                                
                 Exercise1.2. Risanisomorphism. (Hint: foranyobject V,giveanaturalbijec → tion
                 betweenmapsfrom V tothefirstandmapsfrom V to → thesecond. Itisalsopossible
                 tousethe Diagonal-Base-Changediagram,Exercise1.2. S.)                
                    Thenotionofanepimorphismis“dual”tothedefinitionofmonomorphism,  
                 whereallthearrowsarereversed. Thisconceptwillnotbecentralforus,although
                 itturnsupinthedefinitionofanabeliancategory. Intuitively,itisthecategorical
                 versionofasurjectivemap. (Butbecarefulwhenworkingwithcategoriesofobjects
                 that are sets with additional structure, as epimorphisms need not be surjective.
                 Example: in the category Rings, Z Q is an epimorphism, but obviously not
                 surjective.)                                                       
                                         →                                            
                 1.2.11. Representablefunctorsand Yoneda’s Lemma. Muchofourdiscussion 
                 about universal properties can be cleanly expressed in terms of representable
                 functors,undertherubricof“Yoneda’s Lemma”. Yoneda’slemmaisaneasyfact
                 statedinacomplicatedway. Informallyspeaking,youcanessentiallyrecoveran
                 objectinacategorybyknowingthemapsintoit. Forexample,wehaveseenthat 
                 thedataofmapsto X Yarenaturally(canonically)thedataofmapsto Xandto Y. 
                               ↗                                                      
                 Indeed,wehavenowtakenthisasthedefinitionof X Y.                     
                                                  ↗                                   
                    Recall Example1.1.20. Suppose Aisanobjectofcategory C. Foranyobject
                 C  C,wehaveasetofmorphisms Mor(C,A). Ifwehaveamorphismf: B C,       
                   ↑                                                                
                 wegetamapofsets                                                    
                                                                 →                    
                 (1.2.11.1)       Mor(C,A)  $$Mor(B,A),                             
                 bycomposition: givenamapfrom Cto A,wegetamapfrom Bto Abyprecom-        
                 posing with f: B C. Hence this gives a contravariant functor h : C Sets.
                                                           A                        
                 Yoneda’s Lemma states that the functor h determines A up to unique isomor-
                                            A                                       
                 phism. Morepreci → sely:                         →                     
                 1.2. Y. IMPORTANTEXERCISETHATYOUSHOULDDOONCEINYOURLIFE(YONEDA’S      
                  LEMMA).                                                           
                 (a)Supposeyouhavetwoobjects Aand A inacategory C,andmaps              
                                            →                                         
                 (1.2.11.2)     i : Mor(C,A) $$Mor(C,A )                            
                                 C                  →                                 
                 that commute with the maps (1.2.11.1). Show that the i (as C ranges over the
                                                    C                               
                 objects of C) are induced from a unique morphism g: A A . More precisely,
                                                         →                            
                                                      →\n\n--- PAGE 43 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 43
                                                                                    
                 show that there is a unique morphism g: A A such that for all C C, i is
                                                 →                 C                  
                                                             ↑                      
                 u  g  u.                                                           
                   ⇐   ↔                                                              
                 (b)Iffurthermorethei                                               
                               C                                                    
                                 areallbijections,sho → wthattheresultinggisanisomor- 
                 ph → ism. (Hintforboth:Thisismucheasierthanitlooks. Thisstatementissogeneral
                 thattherearereallyonlyacoupleofthingsthatyoucouldpossiblytry. Forexample,
                 ifyou’rehopingtofindamorphism A A ,wherewillyoufindit? Well,you     
                                              →                                       
                 arelookingforanelement Mor(A,A ). Sojustplugin C=Ato(1.2.11.2),andsee
                                         →                                            
                 wheretheidentitygoes.)    →                                          
                    Thereisananalogousstatementwiththearrowsreversed,whereinsteadof 
                 mapsinto A,youthinkofmapsfrom A. Theroleofthecontravariantfunctorh of
                                                                A                   
                 Example1.1.20isplayedbythecovariantfunctorh Aof Example1.1.14. Because
                 theproofisthesame(withthearrowsreversed),youneedn’tthinkitthrough. 
                    Thephrase“Yoneda’s Lemma”properlyreferstoamoregeneralstatement.  
                 Althoughitlooksmorecomplicated,itisnohardertoprove.                
                 1.2. Z.ωEXERCISE.                                                   
                 (a)Suppose Aand Bareobjectsinacategory C. Giveabijectionbetweenthenatu-
                 raltransformationsh A h B ofcovariantfunctors C Sets(see Example1.1.14 
                 forthedefinition)andthemorphisms B A.                               
                 (b)Stateandprovethec → orrespondingfactforcontrav → ariantfunctorsh    
                                                             A                      
                                                              (see Ex-               
                 ample 1.1.20). Remark: A contravarian → t functor F from C to Sets is said to be
                 representableifthereisanaturalisomorphism                          
                                           ∼                                          
                                      ξ: F  $$h .                                   
                                             A                                      
                 Thustherepresentingobject Aisdetermineduptouniqueisomorphismbythepair
                 (F,ξ). Thereisasimilardefinitionforcovariantfunctors.(Wewillrevisitthisin§7.6,
                 andthisproblemwillappearagainas Exercise7.6. C. Theelementξ!1(id ) F(A)
                                                             A                      
                                                               ↑                    
                 isoftencalledthe“universalobject”;doyouseewhy?)                    
                 (c) Yoneda’s Lemma. Suppose F is a covariant functor C Sets, and A C.
                                                                ↑                   
                 Give a bijection between the natural transformations h A F and F(A). (The
                 correspondingfactforcontravariantfunctorsisessentially Ex → ercise10.1. B.)
                    Infancyterms,Yoneda’slemmastatesthefollowing. Gi → venacategory C,we
                 canproduceanewcategory,calledthefunctorcategoryof C,wheretheobjectsare
                 contravariantfunctors C Sets,andthemorphismsarenaturaltransformations
                 ofsuchfunctors. Wehaveafunctor(whichwecanusefullycallh)from C toits 
                 functorcategory,whichse → nds Atoh                                    
                                        A                                           
                                         . Yoneda’s Lemmastatesthatthisisafully      
                 faithfulfunctor,calledthe Yonedaembedding. (Fullyfaithfulfunctorsweredefined
                 in§1.1.15.)                                                        
                 1.2.12. Joke. The Yodaembedding,contravariantitis.                  
                                 1.3Limitsandcolimits                               
                    Limits and colimits are two important definitions determined by universal
                 properties. They generalize a number of familiar constructions. I will give the
                 definitionfirst,andthenshowyouwhyitisfamiliar. Forexample,fractionswill\n\n--- PAGE 44 ---\n44    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 be motivating examples of colimits (Exercise 1.3. D(a)), and the p-adic integers
                 (Example1.3.4)willbemotivatingexamplesoflimits.                    
                                                                                    
                 1.3.1. Limits. Wesaythatacategoryisasmallcategoryiftheobjectsformaset
                 and the morphisms form a set. (This is a technical condition intended only for
                 experts.) Suppose I isanysmallcategory,and C isanycategory. Thenafunctor
                 F: I  C (i.e., withanobject A C foreachelementi I, andappropriate   
                                      i                                             
                                       ↑             ↑                              
                 commutingmorphismsdictatedby I)issaidtobeadiagramindexedby I. We     
                 call I → anindexcategory. Ourindexcategorieswillusuallybepartiallyordered
                 sets(Example1.1.8),inwhichinparticularthereisatmostonemorphismbetween
                 anytwoobjects. (Butotherexamplesaresometimesuseful.) Forexample,if↭is
                 thecategory                                                        
                                            $$                                      
                                       •    •                                       
                                        %%   %%                                     
                                            $$                                      
                                       •    •                                       
                 and A isacategory,thenafunctor↭ A ispreciselythedataofacommuting    
                 squarein A.                                                         
                    Thenthelimitofthediagramisa → nobjectlim A                         
                                                 i                                  
                                                  (orlim A                           
                                                        i                           
                                                        )of C alongwith              
                                               I                                    
                                                     I⇑                             
                 morphismsf : lim A A foreachj I,suchthatifm: j kisamorphismin       
                         j    i   j                                                 
                           I             ↑           ↑                              
                 I,then                                                             
                                →                        →                              
                 (1.3.1.1)           lim A                                           
                                         i                                          
                                      I                                             
                                      fj                                            
                                           fk                                       
                                       %% F(m) ..                                   
                                      A      $$A                                    
                                        j     k                                     
                 commutes,andthisobjectandmapstoeach A areuniversal(final)withrespectto
                                             i                                      
                 thisproperty. Moreprecisely,givenanyotherobject W alongwithmapsg : W
                                                              i                     
                 A commutingwiththe F(m)(ifm: j kisamorphismin I,theng =F(m) g ),     
                   i                                      k       j                 
                                                                 ↔                    
                 thenthereisauniquemap                             →                  
                                      g: W →  lim A                                    
                                              i                                     
                                           I                                        
                 sothatg =f gforalli. (Insomecases,thelimitissometimescalledtheinverse
                       i  i  ↔              →                                           
                 limit or projective limit. We won’t use this language.) By the usual universal
                 propertyargument,ifthelimitexists,itisuniqueuptouniqueisomorphism. 
                 1.3.2. Examples: products. Forexample,if I isthepartiallyorderedset 
                                            •                                       
                                             %%                                     
                                            $$                                      
                                       •    •                                       
                 weobtainthefiberedproduct.                                         
                    If I is                                                          
                                       •    •                                       
                 weobtaintheproduct.\n\n--- PAGE 45 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 45
                                                                                    
                    If I isaset(i.e.,theonlymorphismsaretheidentitymaps),thenthelimitis
                 calledtheproductofthe A ,andisdenoted A . Thespecialcasewhere I has  
                                  i           i i                                   
                 twoelementsistheexampleofthepreviousparagraph.                     
                                            ↓                                       
                 1.3. A. EXERCISE(REALITYCHECK). Supposethatthepartiallyorderedset I has
                 aninitialobjecte. Showthatthelimitofanydiagramindexedby I exists.   
                 1.3. B. EXERCISE: THEDIAGONAL-BASE-CHANGEDIAGRAM,AGAIN. Solve1.2. S   
                 againbyidentifyingboth X X and Y  (X   X )asthelimitofthe            
                                  1                                                 
                                    ↗                                                 
                                     Y 2     ↗ (Y ↓ZY) 1                              
                                                    ↗                                 
                                                    Z  2                            
                 diagram                                                            
                                    X                                               
                                     1                                              
                                          --                                        
                                          Y    $$Z                                  
                                          //                                        
                                    X                                               
                                     2                                              
                 1.3.3. Example: formalpowerseries. Foraring A,the(formal)powerseries,A[[x]],
                 areoftendescribedinformally(andsomewhatunnaturally)asbeingthering  
                                 A[[x]]={a +a x+a x2+ }                             
                                       0  1   2                                     
                                                  ···                               
                 (wherea A,andtheringoperationsarethe“obvious”ones). Itisanexampleof
                       i                                                            
                        ↑                                                           
                 alimitinthecategoryofrings:                                        
                          A[[x]]                                                    
                                 $$A 00 [x]/(x3) 11 $$A[x]/(x2) 22 $$A[x]/(x).      
                           ···                                                      
                 Theuniversalpropertyoflimitsyieldsanaturalringmorphism A[x] A[[x]]. If
                 A=Ror C,thismapfactorsthroughtheringofconvergentpowerseries.        
                                                             →                        
                 1.3.4. Example: the p-adic integers. For a prime number p, the p-adic integers
                 (ormoreinformally,p-adics),Zp ,areoftendescribedinformally(andsomewhat
                 unnaturally)asbeingoftheform                                       
                                   a +a p+a p2+                                     
                                    0  1   2                                        
                                               ···                                  
                 (where0 a <p). Theyareanexampleofalimitinthecategoryofrings:       
                         i                                                          
                       ⇔                                                            
                             Zp                                                     
                                  $$Z .. /(p3) ** $$Z/(p2) 33 $$Z/(p).              
                             ···                                                    
                 (Warning: Zp is sometimes used to denote the integers modulo p, but Z/(p) or
                 Z/p Zisbettertouseforthis,toavoidconfusion. Worse: by§1.2.3,Zp alsodenotes
                 thoserationalswhosedenominatorsareapowerofp. Hopefullythemeaningof 
                 Zp willbeclearfromthecontext.)\n\n--- PAGE 46 ---\n46    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                    The similarity of Examples 1.3.3 and 1.3.4 is no coincidence. Formal power
                 seriesandthep-adicintegersareexamplesofcompletions,thetopicof Chapter28.
                    Limitsdonotalwaysexistforanyindexcategory I. However,youcanoften 
                 easilycheckthatlimitsexistiftheobjectsofyourcategorycanbeinterpretedas
                 setswithadditionalstructure,andarbitraryproductsexist(respectingtheset-like
                 structure).                                                        
                                                                                    
                 1.3. C. IMPORTANTEXERCISE. Showthatinthecategory Sets,                
                                                                                    
                      (a )    A :F(m)(a )=a forallm Mor (j,k) Mor(I) ,              
                     ↗   i i  ↔  I ↑ i   j   k     ↑   I    ≃     ’                     
                             i                                                      
                            ↘                                                       
                 alongwiththeobviousprojectionmapstoeach A ,isthelimitlim A .         
                                                i          i                        
                                                        I                           
                    Thisclearlyalsoworksinthecategory Mod of A-modules(inparticular Vec
                                              A                   k                 
                 and Ab),aswellas Rings.                                              
                    From this point of view, 2+3p+2p2 + Zp can be understood as the 
                                             ··· ↑                                  
                 sequence(2,2+3p,2+3p+2p2,...).                                     
                 1.3.5. Colimits. Moreimmediatelyrelevantforuswillbethedual(arrow-reversed
                 version)ofthenotionoflimit(orinverselimit). Wejustflipthearrowsf in(1.3.1.1),
                                                            i                       
                 and get the notion of a colimit, which is denoted colim A (or lim A ). (You
                                                    I  i    I i                     
                 should draw the corresponding diagram.) Again, if it exists, it is⇑unique up to
                 unique isomorphism. (In some cases, the colimit is sometimes called the direct
                                                           →                          
                 limit, inductive limit, or injective limit. We won’t use this language. I prefer
                 usinglimit/colimitinanalogywithkernel/cokernelandproduct/coproduct. This
                 ismorethananalogy,askernelsandproductsmaybeinterpretedaslimits,and 
                 similarlywithcokernelsandcoproducts. Also,Irememberthatkernels“mapto”,
                 and cokernels are “mapped to”, which reminds me that a limit maps to all the
                 objectsinthebigcommutativediagramindexedby I;andacolimithasamap     
                 fromalltheobjects.)                                                
                 1.3.6. Joke. Acomathematicianisadeviceforturningcotheoremsintoffee.
                    Eventhoughwehavejustflippedthearrows,colimitsbehavequitedifferently
                 fromlimits.                                                        
                 1.3.7. Example. Theabeliangroup5! Zofrationalnumberswhosedenominators
                 arepowersof5isacolimitcolim i Z+ →  5!i Z. Moreprecisely,5! Zisthecolimitof
                                       ↔                                              
                 thediagram                                                         
                                                        →                             
                                Z   $$5!1 Z $$5!2 Z $$                              
                                                   ···                              
                 inthecategoryofabeliangroups.                                      
                    Thecolimitoveranindexset Iiscalledthecoproduct,denoted A ,andis  
                                                            i i                     
                 thedual(arrow-reversed)notiontotheproduct.                         
                                                            ↔                         
                 1.3. D. EXERCISE.                                                    
                 (a)Interpretthestatement“Q=colim 1 Z”.                             
                                         n                                          
                 (b) Interpret the union of some subsets of a given set as a colimit. (Dually, the
                 intersectioncanbeinterpretedasalimit.) Theobjectsofthecategoryinquestion
                 arethesubsetsofthegivenset.\n\n--- PAGE 47 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 47
                                                                                    
                    Colimitsdonotalwaysexist,buttherearetwousefullargeclassesofexamples
                 forwhichtheydo.                                                    
                                                                                    
                 1.3.8. Definition. Anonemptypartiallyorderedset(S, )isfiltered(orissaidto
                                                   ↘                                
                 beafilteredset)ifforeachx,y S,thereisazsuchthatx zandy z. More     
                                     ↑                ↘      ↘                      
                 generally(see Figure1.1,anonemptycategory I isfilteredif:            
                     (i) foreachx,y I,thereisaz I andarrowsx zandy z,and            
                               ↑         ↑                                          
                     (ii) foreverytwoarrowsu: x yandv: x y,thereisanarroww: y z     
                       suchthatw u=w v.                                             
                                                     →        →                         
                               ↔      ↔                                                 
                 (Otherterminologiesarealsocomm → onlyused,suc → has“directedpartiallyorde → red
                 set”and“filteredindexcategory”,respectively.)                      
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                                                                                    
                          FIGURE1.1. Afilteredcategory(pictorialdefinition)         
                                                                                    
                 1.3. E. EXERCISE. Suppose I isfiltered. (Wewillalmostexclusivelyusethecase
                 where I isafilteredset.) Recallthesymbol fordisjointunionofsets. Showthat
                 anydiagramin Setsindexedby I hasthefollowing,withtheobviousmapstoit, 
                                             ↔                                        
                 asacolimit:                                                        
                                 (a ,i) ∼ (a ,j)ifandonlyiftherearef: A A and         
                   (a ,i) A       i    j                  i  k                      
                    i      i                                                        
                      ↑        g: A  A inthediagramforwhichf(a )=g(a )in A           
                 ⇐      i  ⇒  ↔  I ⇑!" j  k                 i   →  j   k#                 
                 (Youwillseethatthe“filtered”hypothesisisthereistoensurethat ∼ isanequiva-
                                    →                                                 
                 lencerelation.)                                                    
                    For example, in Example 1.3.7, each element of the colimit is an element of
                 something upstairs, but you can’t say in advance what it is an element of. For
                 instance,17/125isanelementofthe5!3 Z(or5!4 Z,orlaterones),butnot5!2 Z.
                    Thisideaappliestomanycategorieswhoseobjectscanbeinterpretedassets
                 withadditionalstructure(suchasabeliangroups,A-modules,groups,etc.). For
                 example,thecolimitcolim M inthecategoryof A-modules Mod canbedescribed
                                   i                    A                           
                 as follows. The set underlying colim M is defined as in Exercise 1.3. E. To add
                                          i                                         
                 theelementsm M andm  M ,choosean) I witharrowsu: i )and            
                           i   i    j  j                                            
                            ↑        ↑          ↑                                   
                 v: j ),andthendefinethesumofm andm tobe F(u)(m )+F(v)(m ) M .       
                                         i    j        i      j   &                 
                                                               ↑                    
                                                               →                      
                     →\n\n--- PAGE 48 ---\n48    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 Theelementm M is0ifandonlyifthereissomearrowu: i kforwhich         
                           i   i                                                    
                            ↑                                                       
                 F(u)(m )=0,i.e.,ifitbecomes0“laterinthediagram”. Last,multiplicationbyan
                      i                                                             
                 elementof Aisdefinedintheobviousway.                                
                                                           →                          
                 1.3. F. EXERCISE. Verifythatthe A-moduledescribedaboveisindeedthecolimit.
                 (Make sure you verify that addition is well-defined, i.e., is independent of the
                 choiceofrepresentativesm andm ,thechoiceof),andthechoiceofarrowsuand
                                  i   j                                             
                 v. Similarly,makesurethatscalarmultiplicationiswell-defined.)      
                 1.3. G. USEFUL EXERCISE (LOCALIZATION AS A COLIMIT). Generalize Exer-
                 cise1.3. D(a)tointerpretlocalizationofanintegraldomainasacolimitoverafiltered
                 set: suppose Sisamultiplicativesetof A,andinterpret S!1A=colim1Awhere 
                                                             s                      
                 thecolimitisovers S,andinthecategoryof A-modules. (Aside: Canyoumake
                              ↑                                                     
                 someversionofthisworkevenif Aisn’tanintegraldomain,e.g.,S!1A=colim A ?
                                                                  s                 
                 Thiswillworkinthecategoryof A-algebras.)                            
                    Avariantofthisconstructionworkswithoutthefilteredcondition,ifyouhave
                 anothermeansof“connectingelementsindifferentobjectsofyourdiagram”. For
                 example:                                                           
                 1.3. H. EXERCISE: COLIMITSOFA-MODULESWITHOUTTHEFILTEREDCONDITION.    
                 Suppose you are given a diagram of A-modules indexed by I: F: I Mod ,
                                                                  A                 
                 wherewelet M := F(i). Showthatthecolimitis M modulotherelations     
                           i                    ⇓ i  ↔  I i                           
                 m                                                                  
                   i                                                                
                   ! F(n)(m                                                          
                         i                                                          
                          )foreveryn: i jin I (i.e.,foreveryarrowinthediagram → ). (Some-
                 whatmoreprecisely: “modulo”means“quotientedbythesubmodulegenerated 
                 by”.)              →                                                 
                 1.3.9. Summary. Oneusefulthingtoinformallykeepinmindisthefollowing. Ina
                 categorywheretheobjectsare“set-like”,anelementofalimitcanbethoughtof
                 asafamilyofelementsofeachobjectinthediagram,thatare“compatible”(Exer-
                 cise1.3. C). Andanelementofacolimitcanbethoughtofas(“hasarepresentative
                 thatis”)anelementofasingleobjectinthediagram(Exercise1.3. E). Eventhough
                 thedefinitionsoflimitandcolimitarethesame,justwitharrowsreversed,these
                 interpretationsarequitedifferent.                                  
                 1.3.10. Smallremark. Infact,colimitsexistinthecategoryofsetsforallreasonable
                 (“small”)indexcategories(seeforexample[E,Thm. A6.1]),butthatwon’tmatter
                 tous.                                                              
                 1.3.11. Joke. Whatdoyoucallsomeonewhoreadsapaperoncategorytheory?  
                 Answer: Acoauthor.                                                 
                                     1.4Adjoints                                    
                    Wenextcometoaveryusefulnotioncloselyrelatedtouniversalproperties.
                 Justasauniversalproperty“essentially”(uptouniqueisomorphism)determines
                 an object in a category (assuming such an object exists), “adjoints” essentially
                 determineafunctor(again,assumingitexists). Twocovariantfunctors F: A B
                                                                 →\n\n--- PAGE 49 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 49
                                                                                    
                 and G: B  A areadjointifthereisanaturalbijectionforall A A and B B    
                                                         ↑      ↑                   
                 (1.4.0.1)    τ : Mor (F(A),B) Mor (A,G(B)).                        
                               AB   B          A                                    
                         →                                                            
                 Wesaythat(F,G)formanadjointpair, andthat Fisleft-adjointto G(and Gis  
                 right-adjointto F). Wesay Fisaleftadjoin → t(and Gisarightadjoint). By“natural”
                 wemeanthefollowing. Forallf: A A in A,werequire                     
                                           →                                          
                 (1.4.0.2)     Mor (F(A ),B)                                        
                                         Ff↑                                        
                                            $$Mor (F(A),B)                          
                                 B    →   →        B                                    
                                    φ A → B         φAB                               
                                   %%            %%                                 
                              Mor (A ,G(B))                                         
                                          f↑                                        
                                            $$Mor (A,G(B))                          
                                 A   →           A                                    
                 tocommute,andforallg: B B in Bwewantasimilarcommutativediagramto    
                                      →                                               
                 commute. (Heref isthemapinducedbyf: A A ,and Ff isthemapinduced     
                            ↘                     →     ↘                             
                 by Ff: F(A) F(A                                                     
                              →                                                       
                             ).)                                                    
                                    →                                                 
                                               →                                      
                 1.4. A. EXERCISE. Writedownwhatthisdiagramshouldbe.                  
                          →                                                           
                 1.4. B. EXERCISE. Show that the map τ                               
                                          AB                                        
                                            (1.4.0.1) has the following properties. 
                 For each A there is a map η : A GF(A) so that for any g: F(A) B, the
                                    A                                               
                 correspondingτ (g): A G(B)isgivenbythecomposition                  
                           AB                                                       
                                        →                       →                       
                                  A                                                 
                                    ηA                                              
                                       $$GF(A)                                      
                                            Gg                                      
                                               $$G(B).                              
                                  →                                                   
                 Similarly,thereisamap, : FG(B) Bforeach Bsothatforanyf: A G(B),     
                                  B                                                 
                 thecorrespondingmapτ!1(f): F(A) Bisgivenbythecomposition           
                                 AB                                                 
                                         →                       →                      
                                  F(A)                                              
                                      Ff                                            
                                         $$FG(B)                                    
                                              )B                                    
                                                 $$B.                               
                                         →                                            
                    Hereisakeyexampleofanadjointpair.                               
                 1.4. C. EXERCISE. Suppose M,N,and Pare A-modules(where Aisaring). Describe
                 abijection Hom (M N,P) Hom (M,Hom (N,P)). (Hint: trytousethe        
                           A    A         A     A                                   
                                ⇒                                                     
                 universalpropertyof .)                                             
                                ⇒                                                     
                                     ⇓                                              
                 1.4. D. EXERCISE(TENSOR-HOMADJUNCTION). Showthat()                   
                                                       A                            
                                                        Nand Hom                     
                                                               A                    
                                                                (N, )               
                                                     ·  ⇒           ·                 
                 areadjointfunctors.                                                
                 1.4. E. EXERCISE. Suppose B Aisamorphismofrings. If Misan A-module,you  
                 cancreatea B-module M byconsideringitasa B-module. Thisgivesafunctor  
                                 B                                                  
                  B                                                                 
                   : Mod                                                            
                      A                                                             
                         Mod                                                        
                            B                                                       
                             . Showtha → tthisfunctorisright-adjointto                
                                                       B                            
                                                        A. Inotherwords,            
                 ·                                    · ⇒                             
                 describeabijection                                                 
                         →       Hom (N  A,M)=  ∼  Hom (N,M )                           
                                  A   B         B   B                               
                                      ⇒                                               
                 functorialinbotharguments. (Thisadjointpairisveryimportant.)       
                 1.4.1. ωFancierremarkswewon’tuse. Youcancheckthattheleftadjointdetermines
                 therightadjointuptonaturalisomorphism,andviceversa. Themapsη and, of
                                                            A    B                  
                 Exercise1.4. Barecalledtheunitandcounitoftheadjunction. Thisleadstoadifferent
                 characterizationofadjunction. Supposefunctors F: A B and G: B A are  
                 given,alongwithnaturaltransformationsη: id GFand,: FG id withthe   
                                              A              B                      
                 propertythat G,                                                     
                             ↔                                                        
                             ηG=id                                                  
                                  G                                                 
                                   (foreach B                                        
                                           ↑                                        
                                            B,thecomp → ositionofη                    
                                                           G(B)                     
                                                             :                      
                                                              →                       
                                                              G(B)                  
                                                →            →                          
                                                                   →\n\n--- PAGE 50 ---\n50    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 GFG(B)and G(, ): GFG(B) G(B)istheidentity)and,F Fη=id . Thenyou     
                            B                               F                       
                                                       ↔                              
                 cancheckthat Fisleft-adjointto G. Thesefactsaren’thardtocheck,soifyouwant
                 tousethem,youshouldverif → yeverythingforyourself.                   
                 1.4.2. Examples from other fields. For those familiar with representation theory:
                 Frobenius reciprocity may be understood in terms of adjoints. Suppose V is a
                 finite-dimensionalrepresentationofafinitegroup G,and W isarepresentationof
                 asubgroup H<G. Theninductionandrestrictionareanadjointpair(Ind G,Res G)
                                                              H  H                  
                 betweenthecategoryof G-modulesandthecategoryof H-modules.            
                    Topologists’favoriteadjointpairmaybethesuspensionfunctorandtheloop
                 spacefunctor.                                                      
                 1.4.3. Example: groupificationofabeliansemigroups. Hereisanothermotivating
                 example: gettinganabeliangroupfromanabeliansemigroup. (Anabeliansemi-
                 groupisjustlikeanabeliangroup,exceptwedon’trequireanidentityoraninverse.
                 Morphismsofabeliansemigroupsaremapsofsetspreservingthebinaryoperation.
                 Oneexampleisthenon-negativeintegers Z≃ 0 ={0,1,2,...}underaddition. An-
                 otheristhepositiveintegers Z + ={1,2,3,...}underaddition. Yetanotheristhe
                 positiveintegers Z + undermultiplication. Youmayenjoygroupifyingallthree.)
                 Fromanabeliansemigroup,youcancreateanabeliangroup. Inourexamples,from
                 the nonnegativeintegers underaddition (Z≃ 0,+), we create theintegers (Z,+),
                 andfromthepositiveintegersundermultiplication(Z +, ),wecreatethepositive
                                                     ↗                                
                 rationals(Q +, ). Hereisaformalizationofthatnotion. Agroupificationofan
                           ↗                                                          
                 abeliansemigroup Sisamapofabeliansemigroupsϑ: S Gsuchthat Gisan      
                 abeliangroup,andanymapofabeliansemigroupsfrom Stoanabeliangroup G    
                                                                    →                 
                 factorsuniquelythrough G:                                           
                                                      →                               
                                         π                                          
                                       S   $$G                                      
                                             !                                      
                                             ↑                                      
                                           !! %%                                    
                                            G                                       
                                              →                                       
                 (Perhaps“abeliangroupification”wouldbemoreprecisethan“groupification”.)
                 1.4. F. EXERCISE(ANABELIANGROUPISGROUPIFIEDBYITSELF). Showthatifan   
                 abeliansemigroupisalreadyagroupthentheidentitymorphismisthegroupifica-
                 tion. (Morecorrect: theidentitymorphismisagroupification.) Notethatyoudon’t
                 needtoconstructgroupification(orevenknowthatitexistsingeneral)tosolvethis
                 exercise.                                                          
                 1.4. G. EXERCISE. Constructthe“groupificationfunctor”Hfromthecategoryof
                 nonemptyabeliansemigroupstothecategoryofabeliangroups. (Onepossible
                 construction: given an abelian semigroup S, the elements of its groupification
                 H(S)areorderedpairs(a,b) S S,whichyoumaythinkofasa!b,withthe       
                                   ↑   ↗                                              
                 equivalencethat(a,b)  ∼  (c,d)ifa+d+e = b+c+eforsomee S. Describe    
                                                           ↑                        
                 additioninthisgroup,andshowthatitsatisfiesthepropertiesofanabeliangroup.
                 Describetheabeliansemigroupmap S H(S).) Let Fbetheforgetfulfunctorfrom
                 thecategoryofabeliangroups Abtothecategoryofabeliansemigroups. Showthat
                 Hisleft-adjointto F.                                                
                                          →\n\n--- PAGE 51 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 51
                                                                                    
                    (Hereisthegeneralideaforexperts: Wehaveafullsubcategoryofacategory.
                 Wewantto“project”fromthecategorytothesubcategory. Wehave           
                               Mor   (S,H)=Mor    (G,H)                             
                                 category    subcategory                            
                 automatically;thuswearedescribingtheleftadjointtotheforgetfulfunctor. How
                 theargumentworked:weconstructedsomethingwhichwasinthesmallercategory,
                 whichautomaticallysatisfiestheuniversalproperty.)                  
                 1.4. H. EXERCISE (CF. EXERCISE 1.4. E). The purpose of this exercise is to give
                 youmorepracticewith“leftadjointsofforgetfulfunctors”,themeansbywhich
                 we get abelian groups from abelian semigroups, and sheaves from presheaves.
                 Suppose Aisaring,and Sisamultiplicativesubset. Then S!1A-modulesarea  
                 fullsubcategory(§1.1.15)ofthecategoryof A-modules(viatheobviousinclusion
                 Mod    ε Mod ). Then Mod Mod  canbeinterpretedasanadjointto         
                    S!1A    A        A    S!1A                                      
                 theforgetfulfunctor Mod Mod . Stateandprovethecorrectstatements.    
                                 S!1A   A                                           
                    (Here → isthelargerstory. Ever → y S!1A-moduleisan A-module,andthisisan
                 injective map, so we have a fo → rgetful functor F: Mod              
                                                  S!1A                              
                                                        Mod                         
                                                          A                         
                                                           . In fact this           
                 is a fully faithful functor: it is injective on objects, and the morphisms between
                 anytwo S!1A-modulesas A-modulesarejustthesamewhen → theyareconsidered  
                 as S!1A-modules. Then there is a functor G: Mod Mod , which might  
                                                 A     S!1A                         
                 reasonablybecalled“localizationwithrespectto S”,whichisleft-adjointtothe
                 forgetfulfunctor. Translation:If Misan A-module,and → Nisan S!1A-module,then
                 Mor(GM,N)(morphismsas S!1A-modules,whicharethesameasmorphismsas     
                 A-modules)areinnaturalbijectionwith Mor(M,FN)(morphismsas A-modules).)
                    Table1givesmostoftheadjointsthatwillcomeupforus. Otherexamples  
                 willalsocomeup,suchastheadjointpair( ∼ ,Γ )betweengradedmodulesovera 
                                              •                                     
                 gradedring,andquasicoherentsheavesonthecorrespondingprojectivescheme
                 (§15.7).                                                           
                 1.4.4. Lastcommentsonlyforpeoplewhohaveseenadjointsbefore. If(F,G)isanadjoint
                 pairoffunctors,then Fcommuteswithcolimits,and Gcommuteswithlimits. Also,
                 limitscommutewithlimitsandcolimitscommutewithcolimits. Wewillprove 
                 thesefacts(andalittlemore)in§1.5.14.                               
                           1.5Anintroductiontoabeliancategories                     
                    Ton papier sur l’Alge`bre homologique a e´te´ lu soigneusement, et a converti tout le
                 monde(meˆme Dieudonne´,quisemblecomple`tementfonctorise´!) a` tonpointdevue.
                    Yourpaperonhomologicalalgebrawasreadcarefullyandconvertedeveryone(even
                 Dieudonne´,whoseemstobecompletelyfunctorised!) toyourpointofview.  
                    —J.-P. Serre,letterto A. Grothendieck,Jul13,1955[Gr S,p.17-18]      
                    Since learning linear algebra, you have been familiar with the notions and
                 behaviorsofkernels,cokernels,etc. Laterinyourlifeyousawtheminthecategory
                 ofabeliangroups,andlaterstillinthecategoryof A-modules.             
                    We will soon define some new categories (certain sheaves) that will have
                 familiar-lookingbehavior,reminiscentofthatofmodulesoveraring. Thenotions\n\n--- PAGE 52 ---\n52    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                  situation       category category leftadjoint rightadjoint        
                                  A       B       F: A B   G: B  A                  
                  A-modules(Ex.1.4. D) Mod Mod      ()  N   Hom (N, )                
                                    A        A       A        A                     
                                                   ·  ⇒            ·                  
                  ringmaps                         ()  → A    M   → M                   
                                                     B           B                  
                                                   ·  ⇒         ⇐                     
                  B  A(Ex.1.4. E)  Mod     Mod     (extension (restriction           
                                    B        A                                      
                                                  ofscalars) ofs → calars)            
                  (p → re)sheavesona presheaves sheaves                               
                  topologicalspace on X    on X    sheafification forgetful           
                  X(Ex.2.4. K)                                                       
                  (semi)groups(§1.4.3) semigroups groups groupification forgetful   
                  sheaves,        sheaves sheaves   ϑ!1       ϑ                     
                                                               ↘                    
                  ϑ: X Y (Ex.2.7. B) on Y   on X                                       
                  sheavesofabelian                                                  
                  group → sor O-modules, sheaves sheaves ϑ                             
                                                     !                              
                                                              ϑ!1                   
                  openembeddings  on U     on Y                                       
                  ϑ: Uε Y (Ex.23.4. G)                                               
                  quasicoherentsheaves, QCoh Y QCoh X ϑ ↘     ϑ                     
                                                               ↘                    
                  ϑ: X  → Y (Prop.14.5.7)                                             
                  ringmaps                        M   M      N                      
                                                       B                            
                                                    ⇐          ⇐                    
                  B  A → (Ex.17.1. J) Mod                                              
                                    A                                               
                                          Mod                                       
                                             B                                      
                                                  (restriction Hom                  
                                                              B                     
                                                               (A,N)                
                                                  ofs → calars)   →                     
                  qu → asicoherentsheaves,                                            
                  affineϑ: X Y    QCoh    QCoh      ϑ         ϑ!?                   
                                     X        Y                                     
                                                     ↘                              
                  (Ex.17.1. K(b))                                                    
                          →     TABLE1. Someimportantadjointpairs                     
                 of kernels, cokernels, images, and more will make sense, and they will behave
                 “thewayweexpect”fromourexperiencewithmodules. Thiscanbemadeprecise 
                 throughthenotionofanabeliancategory. Abeliancategoriesaretherightgeneral
                 setting in which one can do “homological algebra”, in which notions of kernel,
                 cokernel,andsoonareused,andonecanworkwithcomplexesandexactsequences.
                    We will see enough to motivate the definitions that we will see in general:
                 monomorphism(andsubobject),epimorphism,kernel,cokernel,andimage. Butin
                 thisbookwewillavoidhavingtoshowthattheybehave“thewayweexpect”ina   
                 generalabeliancategorybecausetheexampleswewillseearedirectlyinterpretable
                 in terms of modules over rings. In particular, it is not worth memorizing the
                 definitionofabeliancategory.                                       
                    Two central examples of an abelian category are the category Ab of abelian
                 groups, and the category Mod of A-modules. The first is a special case of the
                                    A                                               
                 second(justtake A=Z). Aswegivethedefinitions,youshouldverifythat Mod 
                                                                  A                 
                 isanabeliancategory.                                               
                    Wefirstdefinethenotionofadditivecategory. Wewilluseitonlyasastepping
                 stonetothenotionofanabeliancategory. Twoexamplesyoucankeepinmind   
                 whilereadingthedefinition: thecategoryoffree A-modules(where Aisaring),
                 andreal(orcomplex)Banachspaces.\n\n--- PAGE 53 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 53
                                                                                    
                 1.5.1. Definition. Acategory C issaidtobeadditiveifitsatisfiesthefollowing
                 properties.                                                        
                   Ad1. Foreach A,B C,Mor(A,B)isanabeliangroup,suchthatcomposition   
                               ↑                                                    
                       ofmorphismsdistributesoveraddition. (Youshouldthinkaboutwhat 
                       thismeans—ittranslatestotwodistinctstatements.)              
                   Ad2. C hasazeroobject,denoted0. (Thisisanobjectthatissimultaneouslyan
                       initialobjectandafinalobject,Definition1.2.2.)               
                   Ad3. Ithasproductsoftwoobjects(aproduct A Bforanypairofobjects),  
                                                   ↗                                  
                       andhencebyinduction,productsofanyfinitenumberofobjects.      
                    Inanadditivecategory,themorphismsareoftencalledhomomorphisms,and
                 Morisdenotedby Hom. Infact,thisnotation Homisagoodindicationthatyou’re
                 workinginanadditivecategory. Afunctorbetweenadditivecategoriespreserving
                 theadditivestructureof Hom,iscalledanadditivefunctor.               
                 1.5.2. Remarks. Itisaconsequenceofthedefinitionofadditivecategorythatfinite
                 productsarealsofinitecoproducts(i.e.,sums)—thedetailsdon’tmattertous. The
                 symbol isusedforthisnotion. Also,itisquicktoshowthatadditivefunctors
                      ⇓                                                             
                 sendzeroobjectstozeroobjects(showthat Zisa0-objectifandonlyifid =0 ;
                                                               Z  Z                 
                 additivefunctorspreservebothidand0),andpreserveproducts.           
                    One motivation for the name 0-object is that the 0-morphism in the abelian
                 group Hom(A,B)isthecomposition A 0 B. (Wealsoremarkthatthenotion     
                 of0-morphismthusmakessenseinanycategorywitha0-object.)             
                    (A cleaner axiomatization of addit → ive c → ategories that makes clear that the
                 abelian group structure of Mor(A,B) is intrinsic to the category itself is the fol-
                 lowing, [Lur, p. 21–22]. A0. C has a zero object. A1. C has products of any two
                 objects,andcoproductsofanytwoobjects. Bytheuniversalpropertyofproductand
                 coproduct, we have natural morphisms ϖ : A B A B. A2. ϖ is an      
                                            AB                AB                    
                                                        ↗                             
                 isomorphism. Thisallowsustodefineabinaryoperationon Mor(A,B),withf+g
                                                 ↔                                    
                 (forf,g Mor(A,B))definedbythecomposition                           
                                                    →                                 
                      ↑                                                             
                                 (f,g)   ε!1                                        
                               A    $$B B BB $$B B  $$B                             
                                       ↗                                              
                 wherethelastmapisthe“codiagonal”defined ↔ byuniversalpropertyofcoproduct.
                 Alittleworkshowsthatthisendows Mor(A,B)withthestructureofacommutative
                 monoid,i.e.,anabeliansemigroupwithidentity. Theidentityisthecomposition
                 A   0 B. A3. Thiscommutativemonoid Mor(A,B)isanabeliangroup.)       
                 1.5.3. Thecategoryof A-modules Mod isclearlyanadditivecategory,butithas
                    →    →                   A                                          
                 evenmorestructure,whichwenowformalizeasanexampleofanabeliancategory.
                 1.5.4. Definition. Let C beacategorywitha0-object(andthus0-morphisms). A
                 kernelofamorphismf: B Cisdefinedtobeamapi: A Bsuchthatf i=0,       
                                                                ↔                     
                 andthatisuniversalwithrespecttothisproperty. Diagramatically:      
                                   →                    →                               
                                     Z                                              
                                           0                                        
                                     !                                              
                                    ↑                                               
                                     A %% i -- $$B f && $$C                         
                                               44                                   
                                          0\n\n--- PAGE 54 ---\n54    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 (Note that the kernel is not just an object; it is a morphism of an object to B. In
                 practicethetermisoftenappliedtojusttheobject,andtheintendedinterpretation
                 isclearfromthecontext.)Henceitisuniqueuptouniqueisomorphismbyuniversal
                 propertynonsense. Thekerneliswrittenkerf B. Acokernel(denotedcokerf)is
                 definedduallybyreversingthearrows—dothisyourself. Thekerneloff: B C
                 isthelimit(§1.3)ofthediagram  →                                      
                                                                 →                    
                 (1.5.4.1)                  0                                       
                                                                                    
                                             %%                                     
                                          f                                         
                                       B    $$C                                     
                 andsimilarlythecokernelisacolimit(see(2.6.0.1)).                   
                    Ifi: A Bisamonomorphism,thenwesaythat Aisasubobjectof B,where     
                 themapiisimplicit. Thereisalsothenotionofquotientobject,definedduallyto
                 subobject.  →                                                        
                    Anabeliancategoryisanadditivecategorysatisfyingthreeadditionalproper-
                 ties.                                                              
                     (1) Everymaphasakernelandcokernel.                             
                     (2) Everymonomorphismisthekernelofitscokernel.                 
                     (3) Everyepimorphismisthecokernelofitskernel.                  
                    Itisanonobvious(andimpreciselystated)factthateverypropertyyouwant
                 tobetrueaboutkernels,cokernels,etc.followsfromthesethree. (Warning: inpart
                 oftheliterature,additionalhypothesesareimposedaspartofthedefinition.)
                    Theimageofamorphismf: A Bisdefinedasim(f) = ker(cokerf)when-    
                 ever it exists (e.g., in every abelian category). The morphism f: A B factors
                 uniquelythroughimf Bwheneve → rimfexists,and A imfisanepimorphism     
                 andacokernelofkerf Aineveryabeliancategory. Thereaderm → aywantto    
                 verifythisasa(hard!) → exercise.     →                                 
                    The cokernel of a m → onomorphism is called the quotient. The quotient of a
                 monomorphism A Bisoftendenoted B/A(withthemapfrom Bimplicit).         
                    Wewillleavethefoundationsofabeliancategoriesuntouched. Thekeything
                 to remember is tha → t if you understand kernels, cokernels, images and so on in
                 the category of modules over a given ring, you can manipulate objects in any
                 abeliancategory. Thisismadeprecisebythe Freyd-Mitchell Embedding Theorem
                 (Remark1.5.5).                                                     
                    However,theabeliancategorieswewillcomeacrosswillobviouslyberelated
                 to modules, and our intuition will clearly carry over, so we needn’t invoke a
                 theoremwhoseproofwehaven’tread. Forexample,wewillshowthatsheaves   
                 ofabeliangroupsonatopologicalspace Xformanabeliancategory(§2.6), and
                 theinterpretationintermsof“compatiblegerms”willconnectnotionsofkernels,
                 cokernelsetc.ofsheavesofabeliangroupstothecorrespondingnotionsofabelian
                 groups.                                                            
                 1.5.5. Small remark on chasing diagrams. It is useful to prove facts (and solve
                 exercises) about abelian categories by chasing elements. Unfortunately, some
                 commonlyusedabeliancategories,suchasthecategoryofcomplexes(tobedefined
                 in Exercise 1.5. C), do not have “elements” — they are not naturally “sets with
                 additionalstructure”inanyobviousway. Nonetheless,proofbyelement-chasing\n\n--- PAGE 55 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 55
                                                                                    
                 can be justified by the Freyd-Mitchell Embedding Theorem: If C is an abelian
                 categorywhoseobjectsformaset,thenthereisaring Aandanexact,fullyfaithful
                 functorfrom C into Mod ,whichembeds C asafullsubcategory. (Unfortunately,
                                A                                                   
                 the ring A need not be commutative.) A proof is sketched in [Weib, §1.6], and
                 referencestoacompleteproofaregiventhere. Aproofisalsogivenin[KS1,§9.7].
                 Theupshotisthattoprovesomethingaboutadiagraminsomeabeliancategory, 
                 wemayassumethatitisadiagramofmodulesoversomering,andwemaythen      
                 “diagram-chase”elements. Moreover,anyfactaboutkernels,cokernels,andsoon
                 thatholdsin Mod holdsinanyabeliancategory.                          
                            A                                                       
                    If invoking a theorem whose proof you haven’t read bothers you, a short
                 alternativeis Mac Lane’s“elementaryrulesforchasingdiagrams”,[Mac,Thm.3,
                 p.204];[Mac,Lem.4,p.205]givesaproofofthe Five Lemma(Exercise1.6.6)asan
                 example.                                                           
                    Butinanycase,dowhatyouneedtodotoputyourmindatease,soyoucan      
                 moveforward. Doaslittleasyourconsciencewillallow.                  
                 1.5.6. Complexes,exactness,andhomology.                            
                    (Inthisentirediscussion,weassumeweareworkinginanabeliancategory.)
                 Wesayasequence                                                     
                                       f    g                                       
                 (1.5.6.1)          $$A  $$B  $$C   $$                              
                               ···                  ···                             
                 isacomplexat Bifg f=0,andisexactat Bifkerg=imf. (Morespecifically,g  
                                ↔                                                     
                 hasakernelthatisanimageoff. Exactnessat Bimpliesbeingacomplexat B—do 
                 youseewhy?) Asequenceisacomplex(resp.,exact)ifitisacomplex(resp.,exact)
                 ateach(internal)term. Ashortexactsequenceisanexactsequencewithfiveterms,
                 thefirstandlastofwhicharezeros—inotherwords,anexactsequenceoftheform
                                0   $$A  $$B  $$C  $$0.                             
                    Forexample, 0 $$A $$0 isexactifandonlyif A=0;                    
                                            f                                       
                                     0   $$A  $$B                                   
                                                               f                    
                 isexactifandonlyiffisamonomorphism(withasimilarstatementfor A $$B $$0);
                                          f                                         
                                  0    $$A  $$B  $$0                                
                 isexactifandonlyiffisanisomorphism;and                             
                                          f    g                                    
                                  0    $$A  $$B  $$C                                
                                                           f    g                   
                 isexactifandonlyiffisakernelofg(withasimilarstatementfor A $$B $$C $$0).
                 Toshowsomeofthesefactsitmaybehelpfultoprovethat(1.5.6.1)isexactat Bif
                 andonlyifthecokerneloffisacokernelofthekernelofg.                  
                    Ifyouwouldlikepracticeinplayingwiththesenotionsbeforethinkingabout
                 homology,youcanprovethe Snake Lemma(statedin Example1.6.5,withastronger
                 version in Exercise 1.6. B), or the Five Lemma (stated in Example 1.6.6, with a
                 strongerversionin Exercise1.6. C).(Iwoulddothisinthecategoryof A-modules,
                 butsee[KS1,Lem.12.1.1,Lem.8.3.13]forproofsingeneral.)              
                    If(1.5.6.1)isacomplexat B,thenitshomologyat B(oftendenotedby H)is  
                 kerg /imf. (More precisely, there is some monomorphism imf ε kerg, and
                                                            →\n\n--- PAGE 56 ---\n56    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 that Histhecokernelofthismonomorphism.) Therefore,(1.5.6.1)isexactat Bif
                 and only if its homology at B is 0. We say that elements of kerg (assuming the
                 objectsofthecategoryaresetswithsomeadditionalstructure)arethecycles,and
                 elementsofimfaretheboundaries(sohomologyis“cyclesmodboundaries”).  
                 If the complex is indexed in decreasing order, the indices are often written as
                 subscripts, and H is the homology at A A A . If the complex is     
                             i             i+1   i   i!1                            
                 indexedinincreasingorder,theindicesareoftenwrittenassuperscripts,andthe
                 homology Hiat Ai!1 Ai Ai+1isoftenca → lledcoh → omology.                 
                    Anexactsequence                                                 
                                →     →                                                 
                 (1.5.6.2) A :            $$Ai!1                                    
                                              fi!1                                  
                                                 $$Ai                               
                                                     fi                             
                                                      $$Ai+1                        
                                                          fi+1                      
                                                              $$                    
                          •                                                         
                                    ···                       ···                   
                 canbe“factored”intoshortexactsequences                             
                            0    $$kerfi $$Ai $$kerfi+1 $$0                         
                 whichishelpfulinprovingfactsaboutlongexactsequencesbyreducingthemto
                 factsaboutshortexactsequences.                                     
                    More generally, if (1.5.6.2) is assumed only to be a complex, then it can be
                 “factored”intoshortexactsequences.                                 
                 (1.5.6.3) 0    $$kerfi  $$Ai   $$imfi  $$0                         
                           0    $$imfi!1 $$kerfi $$Hi(A ) $$0                       
                                                   •                                
                 1.5. A. EXERCISE. Describeexactsequences                             
                 (1.5.6.4)  0    $$imfi   $$Ai+1   $$cokerfi $$0                    
                            0   $$Hi(A ) $$cokerfi!1 $$imfi $$0                     
                                    •                                               
                 (Thesearesomehowdualto(1.5.6.3). Infactinsomemirroruniversethismight
                 havebeengivenasthestandarddefinitionofhomology.) Assumethecategoryis
                 thatofmodulesoverafixedringforconvenience,butbeawarethattheresultis
                 trueforanyabeliancategory.                                         
                 1.5. B. EXERCISEANDIMPORTANTDEFINITION. Suppose                      
                               0                                                    
                                 d0                                                 
                                   $$A1                                             
                                       d1                                           
                                         $$                                         
                                            dn!1                                    
                                               $$An                                 
                                                  dn                                
                                                     $$$$0                          
                                         ···                                        
                 isacomplexoffinite-dimensionalk-vectorspaces(oftencalled A forshort). Define
                                                        •                           
                 hi(A ) := dim Hi(A ). Showthat (!1)idim Ai = (!1)ihi(A ). Inparticular,
                    •         •                          •                          
                 if A isexact,then (!1)idim Ai =0. (Ifyouhaven’tdealtmuchwithcohomol- 
                    •                                                               
                                      ⇔          ⇔                                  
                 ogy,thiswillgiveyousomepractice.)                                  
                             ⇔                                                      
                 1.5. C. IMPORTANT EXERCISE. Suppose C is an abelian category. Define the
                 category Com ofcomplexes)asfollows. Theobjectsareinfinitecomplexes  
                          C                                                         
                       A :             $$Ai!1                                       
                                           fi!1                                     
                                              $$Ai                                  
                                                  fi                                
                                                    $$Ai+1                          
                                                        fi+1                        
                                                           $$                       
                        •                                                           
                                  ···                       ···\n\n--- PAGE 57 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 57
                                                                                    
                 in C,andthemorphisms A B arecommutingdiagrams                        
                                  •   •                                             
                 (1.5.6.5)        $$A →  i!1                                          
                                      fi!1                                          
                                         $$Ai                                       
                                             fi                                     
                                               $$Ai+1                               
                                                   fi+1                             
                                                      $$                            
                             ···                      ···                           
                                    %% gi!1 %% gi %% gi+1                           
                                  $$Bi!1 $$Bi  $$Bi+1 $$                            
                             ···                      ···                           
                 Showthat Com isanabeliancategory.                                   
                           C                                                        
                    Feelfreetodealwiththespecialcaseofmodulesoverafixedring. (Remark
                 forexperts: Essentiallythesameargumentshowsthat CI isanabeliancategory
                 foranysmallcategory I andanyabeliancategory C. Thisimmediatelyimplies
                 thatthecategoryofpresheavesonatopologicalspace Xwithvaluesinanabelian
                 category C isautomaticallyanabeliancategory,cf.§2.3.5.)             
                 1.5. D. IMPORTANT EXERCISE. Show that (1.5.6.5) induces a map of homology
                 Hi(A                                                               
                     •                                                              
                     )  Hi(B                                                        
                           •                                                        
                            ). Showfurthermorethat Hi isacovariantfunctor Com         
                                                              C                     
                                                                  C.                
                 (Again,feelfreetodealwiththespecialcase Mod .)                      
                                               A                                    
                       →                                           →                    
                 1.5.7. Homotopic maps induce the same maps on homology. We say two maps of
                 complexesf: C D andg: C D arehomotopic ifthereisasequenceof        
                           •   •     •   •                                          
                 mapsw: Ci Di!1suchthatf!g=dw+wd.                                   
                             →           →                                              
                 1.5. E. EXERCISE. Showthattwohomotopicmapsgivethesamemaponhomology.  
                          →                                                           
                 1.5.8. Theorem(Longexactsequences). — Ashortexactsequenceofcomplexes
                        0    :          $$0    $$0   $$0   $$                       
                        •                                                           
                                  ···                      ···                      
                       A                                                            
                        %%                                                          
                             :         $$Ai!                                        
                                         %%                                         
                                          1                                         
                                           fi!1                                     
                                              $$A                                   
                                               %%                                   
                                                i                                   
                                                  fi                                
                                                    $$Ai+                           
                                                      %%                            
                                                       1                            
                                                        fi+1                        
                                                           $$                       
                        •                                                           
                                  ···                      ···                      
                        %%               %% gi!1 %% gi %% gi+1                      
                        B    :         $$Bi!1 $$Bi  $$Bi+1 $$                       
                        •                                                           
                                  ···                      ···                      
                       C                                                            
                        %%                                                          
                             :         $$Ci!                                        
                                         %%                                         
                                          1                                         
                                           hi!1                                     
                                              $$C                                   
                                               %%                                   
                                                i                                   
                                                  hi                                
                                                    $$Ci+                           
                                                      %%                            
                                                       1                            
                                                        hi+1                        
                                                           $$                       
                        •                                                           
                                  ···                      ···                      
                        %%               %%    %%     %%                            
                        0    :          $$0    $$0   $$0   $$                       
                        •                                                           
                                  ···                      ···                      
                 inducesalongexactsequenceincohomology                              
                                              $$Hi!1(C ) $$                         
                                                   •                                
                                       ···                                          
                             Hi(A )   $$Hi(B ) $$Hi(C ) $$                          
                                •        •        •                                 
                            Hi+1(A )   $$                                           
                                 •                                                  
                                       ···\n\n--- PAGE 58 ---\n58    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                    (This requires a definition of the connecting homomorphism Hi!1(C )
                                                                •                   
                 Hi(A ),whichis“natural”inanappropriatesense.) Inthecategoryofmodules
                     •                                                              
                 overaring,Theorem1.5.8willcomeoutofourdiscussionofspectralsequence → s,
                 see Exercise1.6. F,butthisisasomewhatperversewayofprovingit. Foraproof
                 in general, see [KS1, Theorem 12.3.3]. You may want to prove it yourself, by
                 firstprovingaweakerversionofthe Snake Lemma(Example1.6.5),whereinthe 
                 hypotheses(1.6.5.1),the0’sinthebottomleftandtoprightareremoved,andinthe
                 conclusion(1.6.5.2),thefirstandlast0’sareremoved.                  
                 1.5.9. Exactnessoffunctors. If F: A Bisanadditivecovariantfunctorfromone
                 abeliancategorytoanother,wesaythat Fisright-exactiftheexactnessof   
                                        →                                             
                                 A     $$A  $$A   $$0,                              
                                   →            →  →                                      
                 in A impliesthat                                                    
                               F(A )  $$F(A) $$F(A ) $$0                            
                                  →                →  →                                   
                 isalsoexact. Dually,wesaythat Fisleft-exactiftheexactnessof         
                          0     $$A    $$A    $$A    implies                        
                                  →                →  →                                   
                          0    $$F(A ) $$F(A) $$F(A ) isexact.                      
                                   →               →  →                                   
                 Anadditivecontravariantfunctorisleft-exactiftheexactnessof         
                              A      $$A    $$A   $$0   implies                     
                                →               →  →                                      
                        0   $$F(A ) $$F(A) $$F(A )      isexact.                    
                                →  →               →                                      
                 Thereadershouldbeabletodeducewhatitmeansforacontravariantfunctorto 
                 beright-exact.                                                     
                    Anadditivecovariantorcontravariantfunctorisexactifitisbothleft-exact
                 andright-exact.                                                    
                 1.5. F. EXERCISE. Suppose Fisanexactfunctor. Showthatapplying Ftoanexact
                 sequencepreservesexactness. Forexample,if Fiscovariant,and A A A is  
                                                           →        →  →                  
                 exact,then FA FA FA isexact. (Thiswillbegeneralizedin Exercise1.5. I(c).)
                           →         →  →                                                 
                                                            →    →                      
                 1.5. G. EXERCISE. Suppose Aisaring,S Aisamultiplicativesubset,and Mis  
                            →     →            ≃                                        
                 an A-module.                                                        
                 (a)Showthatlocalizationof A-modules Mod Mod isanexactcovariant       
                                             A     S!1A                             
                 functor.                                                           
                 (b)Showthat()                                                      
                             A                                                      
                              Misaright-exactcovariant → functor Mod                   
                                                      A                             
                                                         Mod                        
                                                            A                       
                                                             . (Thisisa             
                          ·  ⇒                                                        
                 repeatof Exercise1.2. H.)                                            
                 (c)Showthat Hom(M, )isaleft-exactcovariantfunctor Mod A →  Mod A . If C is
                                ·                                                   
                 any abelian category, and C C, show that Hom(C, ) is a left-exact covariant
                                    ↑              ·                                
                 functor C Ab.                             →                           
                 (d)Showthat Hom(,M)isaleft-exactcontravariantfunctor Mod Mod . If C is 
                                                        A     A                     
                             ·                                                      
                 anyabelian → category,and C C,showthat Hom(,C)isaleft-exactcontravariant
                                   ↑            ·                                   
                 functor C Ab.                             →                           
                         →\n\n--- PAGE 59 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 59
                                                                                    
                 1.5. H. EXERCISE. Suppose Misafinitelypresented A-module: Mhasafinite 
                 numberofgenerators,andwiththesegeneratorsithasafinitenumberofrelations;
                 orusefullyequivalently,fitsinanexactsequence                       
                                                                                    
                 (1.5.9.1)      A q    $$A p $$M   $$0                              
                                 ⇐      ⇐                                           
                 Use(1.5.9.1)andtheleft-exactnessof Homtodescribeanisomorphism       
                           S!1Hom (M,N)++  ∼  $$Hom (S!1M,S!1N).                      
                                 A           S!1A                                   
                 (Youmightbeabletointerpretthisinlightofavariantof Exercise1.5. Ibelow,for
                 left-exactcontravariantfunctorsratherthanright-exactcovariantfunctors.)
                 1.5.10. Example: Homdoesn’talwayscommutewithlocalization. Inthelanguageof
                 Exercise1.5. H,take A=N=Z,M=Q,and S=Z\{0}.                            
                 1.5.11. ωTwousefulfactsinhomologicalalgebra.                       
                    We now come to two (sets of) facts I wish I had learned as a child, as they
                 would have saved me lots of grief. They encapsulate what is best and worst of
                 abstractnonsense. Thestatementsaresogeneralastobenonintuitive. Theproofs
                 areveryshort. Theygeneralizesomespecificbehaviorthatiseasytoproveonan
                 adhocbasis. Oncetheyaresecondnaturetoyou,manysubtlefactswillbecome 
                 obvioustoyouasspecialcases. Andyouwillseethattheywillgetused(implicitly
                 orexplicitly)repeatedly.                                           
                 1.5.12. ωInteractionofhomologyand(right/left-)exactfunctors.       
                    Youmightwaittoprovethisuntilyoulearnaboutcohomologyin Chapter18, 
                 whenitwillfirstbeusedinaseriousway.                                
                 1.5. I. IMPORTANT EXERCISE (THE FHHF THEOREM). This result can take you
                 far, and perhaps for that reason it has sometimes been called the Fernbahnhof
                 (Fernba Hn Ho F)Theorem,notablyin[Vak1,Exer.1.5. I]. Suppose F: A B isa  
                 covariantfunctorofabeliancategories,and C isacomplexin A.            
                                             •                                      
                     (a) (Fright-exactyields FH                                     
                                     •                                              
                                         $$H                                        
                                          •                                         
                                           F)If Fisright-exact,describe → anatural     
                       morphism FH H F.(Moreprecisely,foreachi,theleftsideis Fapplied 
                               •   •                                                
                       tothecohomologyatpieceiof C ,whiletherightsideisthecohomology 
                                           •                                        
                       atpieceiof FC • → .)                                            
                     (b) (F left-exact yields FH • ++ H • F) If F is left-exact, describe a natural
                       morphism H F FH .                                             
                               •    •                                               
                                     ∼                                                
                     (c) (Fexactyields FH                                           
                                 •                                                  
                                  ++  $$H                                           
                                       •                                            
                                        F)If Fisexact,showthatthemorphismsof         
                       (a)and(b)arein → versesandthusisomorphisms.                    
                 Hint for (a): use Ci                                               
                                di                                                  
                                  $$Ci+1 $$cokerdi $$0 to give an isomorphism       
                 Fcokerdi  ∼  coker Fdi. Thenusethefirstlineof(1.5.6.4)togiveanepimorphism
                 Fimdi ↫ im Fdi. Then use the second line of (1.5.6.4) to give the desired map
                 FHi C                                                               
                     •                                                              
                        H↑ i  → FC                                                    
                           •                                                        
                           . Whileyouareatit,youmayaswelldescribeamapforthefourth   
                 memberofthequartet{coker,im,H,ker}: Fkerdi ker Fdi.                 
                       →                                                              
                 1.5.13. Ifthismakesyourheadspin,youmayprefertothinkofitinthefollowing
                                                 →                                    
                 specificcase,whereboth A and Barethecategoryof A-modules,and Fis() N   
                                                                 A                  
                                                              ·  ⇒                    
                 for some fixed A-module N. Your argument in this case will translate without\n\n--- PAGE 60 ---\n60    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 change to yield a solution to Exercise 1.5. I(a) and (c) in general. If N is exact,
                                                             ⇒                        
                 then Niscalledaflat A-module. (Thenotionofflatnesswillturnouttobevery
                 important,andisdiscussedindetailin Chapter24.)                      
                    Forexample,localizationisexact(Exercise1.5. G(a)),so S!1Aisaflat A-algebra
                 forallmultiplicativesets S. Thustakingcohomologyofacomplexof A-modules
                 commuteswithlocalization—somethingyoucouldverifydirectly.          
                 1.5.14. Interactionofadjoints,(co)limits,and(left-andright-)exactness.
                    Asurprisingnumberofargumentsboildowntothestatement:             
                    Limitscommutewithlimitsandrightadjoints. Inparticular,inanabeliancategory,
                 becausekernelsarelimits,bothlimitsandrightadjointsareleft-exact.   
                    aswellasitsdual:                                                
                    Colimitscommutewithcolimitsandleftadjoints. Inparticular,becausecokernelsare
                 colimits,bothcolimitsandleftadjointsareright-exact.                
                    Thesestatementswerepromisedin§1.4.4,andwillbeprovedbelow. Thelatter
                 hasausefulextension:                                               
                    In Mod ,colimitsoverfilteredindexcategoriesareexact. “Filtered”wasdefinedin
                        A                                                           
                 §1.3.8.                                                            
                 1.5.15. ωω Caution. It is not true that in abelian categories in general, colimits
                 overfilteredindexcategoriesareexact. (Grothendieckrealizedthedesirabilityof
                 suchcolimitsbeingexact,andformalizedthisashis“AB5”axiom,seeforexample
                 [Stacks, tag 079A].) Here is a counterexample. Because the axioms of abelian
                 categoriesareself-dual,itsufficestogiveanexampleinwhichacofilteredlimitfails
                 tobeexact(wherecofilteredhastheobviousdualdefinitiontofiltered),andwedo
                 this. Fixaprimep. Inthecategory Abofabeliangroups,foreachpositiveinteger
                 n,wehaveanexactsequence Z Z/(pn) 0. Takingthelimitoverallninthe     
                 obviousway,weobtain Z Zp 0,whichiscertainlynotexact.)               
                    Unimportant Remark1.5.18w → illdasha → notherhopeyoumayhave.         
                                  →     →                                               
                 1.5.16. Ifyouwanttousethesestatements(forexample,laterinthisbook),youwill
                 havetoprovethem. Let’snowmakethemprecise.                          
                 1.5. J. EXERCISE (KERNELS COMMUTE WITH LIMITS). Suppose C is an abelian
                 category, and a: I C and b: I C are two diagrams in C indexed by I.
                 Forconvenience,let A =a(i)and B =b(i)betheobjectsinthosetwodiagrams. 
                               i        i                                           
                 Leth                                                               
                     i                                                              
                     : A                                                            
                       i                                                            
                          B                                                         
                           i                                                        
                            bem → apscommuting → withthemapsinthediagram. (Translation: 
                 h is a natural transformation of functors a b, see §1.1.21.) Then the kerh
                                                                  i                 
                 form anoth → er diagram in C indexed by I. Describe a canonical isomorphism
                          ∼                                                           
                 limkerh                                                            
                       i                                                            
                           ker(lim A                                                 
                                i                                                   
                                   lim B                                             
                                      i                                             
                                       ),assuming → thelimitsexist.                   
                    Implicit in the previous exercise is the idea that limits should somehow be
                 understoo↑d → asfunctors.  →                                           
                 1.5. K. EXERCISE. Makesenseofthestatementthat“limitscommutewithlimits”in
                 ageneralcategory,andproveit. (Hint: recallthatkernelsarelimits. Theprevious
                 exerciseshouldbeacorollaryofthisone.)                              
                 1.5.17. Proposition (right adjoints commute with limits). — Suppose (F: C
                 D,G: D  C)isapairofadjointfunctors. If A = lim A isalimitin D ofadiagram
                                                  i                                 
                                                                   →                  
                        →\n\n--- PAGE 61 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 61
                                                                                    
                 indexedby I,then GA=lim GA (withthecorrespondingmaps GA GA )isalimit   
                                     i                       i                      
                 in C.                                                               
                                                          →                           
                 Proof. We must show that GA GA satisfies the universal property of limits.
                                         i                                          
                 Supposewehavemaps W GA commutingwiththemapsof I. Wewishto            
                                      i                                             
                 showthatthereexistsaunique W  →  GAextendingthe W GA i . Byadjointness 
                 of Fand G,wecanrestateth → isas: Supposewehavemaps FW A                 
                                                           i                        
                                                            commuting               
                 withthemapsof I. Wewishtosho → wthatthereexistsauniq → ue FW Aextending  
                 the FW  A i . Butthisispreciselytheuniversalpropertyofthe → limit. ↭  
                    Ofcourse,thedualstatementsto Exercise1.5. Kand Proposition → 1.5.17holdby
                 thedual → arguments.                                                 
                    If Fand Gareadditivefunctorsbetweenabeliancategories, and(F,G)isan
                 adjointpair,then(askernelsarelimitsandcokernelsarecolimits)Gisleft-exact
                 and Fisright-exact.                                                 
                 1.5. L. EXERCISE. Showthatin Mod                                     
                                        A                                           
                                         ,colimitsoverfilteredindexcategoriesare    
                 exact. (Yourargumentwillapplywithoutchangetoanyabeliancategorywhose
                 objects can be interpreted as “sets with additional structure”.) Right-exactness
                 follows from the above discussion, so the issue is left-exactness. (Possible hint:
                 Afteryoushowthatlocalizationisexact,Exercise1.5. G(a),orstalkificationisexact,
                 Exercise2.6. E,inahands-onway,youwillbeeasilyabletoprovethis. Conversely,
                 ifyoudothisexercise,thosetwowillbeeasy.)                           
                 1.5. M. EXERCISE. Showthatfilteredcolimitscommutewithhomologyin Mod   
                                                                  A                 
                                                                   .                
                 Hint: usethe FHHFTheorem(Exercise1.5. I),andtheprevious Exercise.     
                    Inlightof Exercise1.5. M,youmaywanttothinkabouthowlimits(andcolimits)
                 commutewithhomologyingeneral,andwhichwaymapsgo. Thestatementof     
                 the FHHFTheoremshouldsuggesttheanswer. (Arelimitsanalogoustoleft-exact
                 functors,orright-exactfunctors?) Wewon’tdirectlyusethisinsight,butsee§18.1
                 (vii)foranexample.                                                 
                    Justascolimitsareexact(notjustright-exact)inespeciallygoodcircumstances,
                 limitsareexact(notjustleft-exact)too. Thefollowingwillbeusedtwicein Chap-
                 ter28.\n\n--- PAGE 62 ---\n62    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 1.5. N. EXERCISE. Suppose                                            
                                                                                    
                                   .      .      .                                  
                                   .      .      .                                  
                                   .      .      .                                  
                                   %%%%   %%      %%                                
                            0    $$A    $$B     $$C    $$0                          
                                  n+1     n+1    n+1                                
                                   %%%%   %%      %%                                
                            0    $$A     $$B    $$C    $$0                          
                                   n      n       n                                 
                                   %%%%   %%      %%                                
                                   .      .      .                                  
                                   .      .      .                                  
                                   .      .      .                                  
                                   %%%%   %%      %%                                
                            0     $$A    $$B    $$C    $$0                          
                                   0      0       0                                 
                 is an inverse system of exact sequences of modules over a ring, such that the
                 maps A    A are surjective. (We say: “transitionmaps of theleft term are
                      n+1   n                                                       
                 surjective”.) Showthatthelimit                                     
                          →                                                           
                 (1.5.17.1)   0   $$lim A  $$lim B   $$lim C  $$0                      
                                      n       n       n                             
                 isalsoexact. (Youwillneedtodefinethemapsin(1.5.17.1).)             
                 1.5.18. Unimportant Remark. Basedontheseideas,youmaysuspectthatright-exact
                 functorsalwayscommutewithcolimits. Thefactthattensorproductcommutes
                 withinfinitedirectsums(Exercise1.2. M)mayreinforcethisidea. Unfortunately,
                 itisnottrue—“doubledual” ∨∨ : Vec Vec iscovariantandrightexact(in  
                                          k    k                                    
                                    ·                                               
                 fact,exact),butdoesnotcommutewithinfinitedirectsums,as (k∨∨)isnot  
                                                        ⇓i=1                        
                 isomorphicto( ⇓i=1 k)∨∨.   →                →                          
                             →                                                        
                 1.5.19. ωDreamingofderivedfunctors. Whenyouseealeft-exactfunctor,you
                 shouldalwaysdreamthatyouareseeingtheendofalongexactsequence. If    
                              0    $$M   $$M  $$M    $$0                            
                                      →            →  →                                   
                 isanexactsequenceinabeliancategory A,and F: A Bisaleft-exactfunctor, 
                 then                                                               
                                0   $$FM   $$FM  $$FM →                               
                                        →              →  →                               
                 isexact,andyoushouldalwaysdreamthatitshouldcontinueinsomenaturalway.
                 Forexample,thenexttermshoulddependonlyon M ,callit R1FM ,andifitis   
                                                    →          →                        
                 zero,then FM FM isanepimorphism. Thisremarkholdstrueforleft-exact   
                                →  →                                                    
                 andcontravariantfunctorstoo. Ingoodcases,suchacontinuationexists,andis
                 incrediblyusefu → l. Wewilldiscussthisin Chapter23.                   
                                 1.6ωSpectralsequences\n\n--- PAGE 63 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 63
                                                                                    
                    Jesuisquelquepeuaffole´parcede´lugedecohomologie,maisj’aicourageusementtenu
                 lecoup. Tasuitespectralemeparaˆıtraisonnable(jecroyais,suruncasparticulier,l’avoir
                 miseende´faut,maisjem’e´taistrompe´,etcelamarcheaucontraireadmirablementbien).
                    Iamabitpanic-strickenbythisfloodofcohomology,buthaveborneupcourageously.
                 Yourspectralsequenceseemsreasonabletome(Ithought Ihadshownthatitwaswrongin
                 aspecialcase,but Iwasmistaken,onthecontraryitworksremarkablywell).  
                    —J.-P. Serre,letterto A. Grothendieck,March14,1956[Gr S,p.38]       
                    Spectralsequencesareapowerfulbook-keepingtoolforprovingthingsinvolv-
                 ingcomplicatedcommutativediagrams. Theywereintroducedby Lerayinthe  
                 1940’satthesametimeasheintroducedsheaves. Theyhaveareputationforbeing
                 abstruseanddifficult. Ithasbeensuggestedthatthename‘spectral’wasgiven
                 because,likespecters,spectralsequencesareterrifying,evil,anddangerous. Ihave
                 heardnoonedisagreewiththisinterpretation, whichisperhapsnotsurprising
                 since Ijustmadeitup.                                                
                    Nonetheless, the goal of this section is to tell you enough that you can use
                 spectralsequenceswithouthesitationorfear,andwhyyoushouldn’tbefrightened
                 whentheycomeupinaseminar. Whatisperhapsdifferentinthispresentationis
                 thatwewillusespectralsequencestoprovethingsthatyoumayhavealreadyseen,
                 andthatyoucanproveeasilyinotherways. Thiswillallowyoutogetsomehands-
                 onexperienceforhowtousethem. Wewillalsoseethemonlyinthespecialcaseof
                 doublecomplexes(theversionbyfarthemostoftenusedinalgebraicgeometry),
                 andnotinthegeneralformusuallypresented(filteredcomplexes,exactcouples,
                 etc.). See[Weib,Ch.5]formoredetailedinformationifyouwish.          
                    Youshouldnotreadthissectionwhenyouarereadingtherestof Chapter1.  
                 Instead, you should read it just before you need it for the first time. When you
                 finallydoreadthissection,youmustdotheexercisesupto Exercise1.6. F.   
                    For concreteness, we work in the category Mod of module over a ring A.
                                                  A                                 
                 However,everythingwesaywillapplyinanyabeliancategory. (Andifithelps
                 youfeelsecure,workinsteadinthecategory Vec ofvectorspacesoverafieldk.)
                                               k                                    
                 1.6.1. Doublecomplexes.                                            
                    Adoublecomplexisacollectionof A-modules Ep,q(p,q Z),and“rightward”
                 morphismsdp,q: Ep,q Ep+1,qand“upward”morphisms ↑ dp,q: Ep,q Ep,q+1.
                 Inthesuperscript,thefirstentrydenotesthecolumnnumber(the“x-coordinate”),
                 andthesecon↑dentryde → notestherownumber(the“y-coordina↓te”). (War → ning: this
                 isoppositetotheconventionformatrices.) Thesubscriptismeanttosuggestthe
                 directionofthearrows. Wewillalwayswritetheseasd andd andignorethe  
                 superscripts. Werequirethatd andd satisfy(a)d2 =0,(b)d2 =0,andonemore
                 condition: (c)eitherd d =d d (allthesquarescommu↑te)ord↓ d +d d =0 
                 (theyallanticommute). Bothc↑omeup↓innature,a↑ndyoucan↓switchfromoneto
                 theotherbyreplacing↑dp↓,q w↓ith↑(!1)pdp,q. So Iwillassumetha↑tal↓lthe↓sq↑uares
                 anticommute,butthatyouknowhowtoturnthecommutingcaseintothisone.    
                 (Youwillseethattherei↓snodifferencein↓ therecipe,basicallybecausetheimage\n\n--- PAGE 64 ---\n64    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 andkernelofahomomorphismfequaltheimageandkernelrespectivelyof!f.)  
                                                                                    
                                        dp,q+1                                      
                             Ep,q+1              $$Ep+1,q+1                         
                               ,,                   ,,                              
                                        ↑                                           
                            dp,q     anticommutes    dp+1,q                         
                             ↓                        ↓                             
                                        dp,q                                        
                             Ep,q                 $$Ep+1,q                          
                                         ↑                                          
                    Therearevariationsonthisdefinition,whereforexampletheverticalarrows
                 godownwards,orsomesubsetofthe Ep,qisrequiredtobezero.               
                    Fromthedoublecomplexweconstructacorresponding(single)complex E   
                                                                  •                 
                 with Ek = Ei,k!i, with d = d +d . In other words, when there is a single
                          i                                                         
                        ⇓                                                           
                 superscriptk,wemeanasumofthekthantidiagonalofthedoublecomplex. The 
                 singlecomplexissometimescalled↑theto↓talcomplex. Notethatd2 =(d +d )2 =
                 d2 +(d d +d d )+d2 =0,so E isindeedacomplex.                        
                                        •                                           
                    Thecohomologyofthesinglecomplexissometimescalledthehype↑rcoho↓mol-
                 og↑y of th↑e d↓oubl↓e↑comple↓x. We will instead use the phrase cohomology of the
                 doublecomplex.                                                     
                    Ourinitialgoalwillbetofindthecohomologyofthedoublecomplex. Youwill
                 seelaterthatwesecretlyalsohaveothergoals.                          
                    A spectral sequence is a recipe for computing some information about the
                 cohomologyofthedoublecomplex. Iwon’tyetgivethefullrecipe. Surprisingly,
                 thisfragmentarybitofinformationissufficienttoprovelotsofthings.    
                 1.6.2. Approximate Definition. Aspectralsequencewithrightwardorientationis
                 asequenceoftablesorpages Ep,q, Ep,q, Ep,q,...(p,q Z),where Ep,q =  
                                      0   1    2      ↑         0                   
                 Ep,q,alongwithadifferential                                        
                                    ↑   ↑    ↑                ↑                     
                                 dp,q: Ep,q $$ Ep!r+1,q+r                           
                                  r    r       r                                    
                 (r Z≃ 0)with dp r ,q ↑dp r +r!↑1,q!r = 0,an↑dwithanisomorphismofthecoho-
                   ↑            ↔                                                     
                 mologyof d at Ep,q(i.e.,ker dp,q/im dp+r!1,q!r)with Ep,q.          
                          r   r         r     r           r+1                       
                    Theorientat ↑ ionindic ↑ atesthatour0thdifferentialistherightwardone:d =d .
                                                              0                     
                 Theleftsub↑script“↑ ”isusuallyo↑mitted. ↑ ↑                        
                    Theorderofthemorphismsisbestunderstoodvisually: ↑               
                              →                                                       
                 (1.6.2.1)                                                          
                                   •66                                              
                                       •55                                          
                                      d3                                            
                                          d2                                        
                                            •,,                                     
                                             d1                                     
                                                 $$                                 
                                            • d0 •\n\n--- PAGE 65 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 65
                                                                                    
                 (the morphisms each apply to different pages). Notice that the map always is
                 “degree1”intermsofthegradingofthesinglecomplex E . (Youshouldfigureout
                                                    •                               
                 whatthisinformalstatementreallymeans.)                             
                    Theactualdefinitiondescribeswhat E , andd , reallyare,intermsof E , .
                                            •r•  •r•             ••                 
                 Wewilldescribed ,d ,andd below,andyoushouldfornowtakeonfaiththat   
                             0 1    2                                               
                 thissequencecontinuesinsomenaturalway.                             
                    Notethat Ep,q isalwaysasubquotientofthecorrespondingtermontheith 
                           r                                                        
                 page Ep,qforalli<r. Inparticular,if Ep,q =0,then Ep,q =0forallr.      
                      i                           r                                 
                    Supposenowthat E , isafirstquadrantdoublecomplex,i.e.,Ep,q = 0for
                                ••                                                  
                 p < 0orq < 0(so Ep r ,q = 0forallrunlessp,q Z≃ 0). Thenforanyfixedp,q,
                 oncerissufficientlylarge,Ep,q iscomputedfrom ↑ (E , ,d )usingthecomplex
                                   r+1           •r• r                              
                                  0                                                 
                                   77                                               
                                      dp,q                                          
                                       r                                            
                                       Ep,q                                         
                                        r                                           
                                         77                                         
                                            dp+r!1,q!r                              
                                             r                                      
                                              0                                     
                 andthuswehavecanonicalisomorphisms                                 
                                  Ep,q =  ∼  Ep,q =  ∼  Ep,q =  ∼  .                      
                                   r   r+1  r+2 ···                                 
                 We denote this module Ep,q. The same idea works in other circumstances, for
                 exampleifthedoublecomplexisonlynonzeroinafinitenumberofrows—Ep,q = 
                 0unlessq <q<q . This → willcomeupforexampleinthemappingconeandlong   
                       0     1                                                      
                 exactsequencediscussion(Exercises1.6. Fand1.6. Ebelow).              
                    We now describe the first few pages of the spectral sequence explicitly. As
                 statedabove,thedifferentiald on E , =E , isdefinedtobed . Therowsare
                                    0   •0• ••                                      
                 complexes:                                                         
                                                         ↑                          
                                                   $$  $$                           
                                              •    •    •                           
                            The0thpage E :          $$  $$                           
                                     0                                              
                                              •    •    •                           
                                                   $$  $$                           
                                              •    •    •                           
                 and so E is just the table of cohomologies of the rows. You should check that
                       1                                                            
                 therearenowverticalmapsdp,q: Ep,q Ep,q+1oftherowcohomologygroups,  
                                    1  1    1                                       
                 inducedbyd ,andthatthesemakethecolumnsintocomplexes. (Thisisessentially
                 thefactthatamapofcomplexesinduce → samaponhomology.) Wehave“usedup   
                         ↓\n\n--- PAGE 66 ---\n66    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 thehorizontalmorphisms”,but“theverticaldifferentialsliveon”.       
                                                                                    
                                              •,,  •,,  •,,                         
                                                                                    
                                                                                    
                            The1stpage E :                                           
                                     1        •,,  •,,  •,,                         
                                                                                    
                                              •    •    •                           
                    Wetakecohomologyofd on E ,givingusanewtable,Ep,q. Itturnsoutthat 
                                   1   1               2                            
                 therearenaturalmorphismsfromeachentrytotheentrytwoaboveandonetothe 
                 left,andthatthecompositionofthesetwois0. (Itisaveryworthwhileexercise
                 to work out how this natural morphism d should be defined. Your argument
                                            2                                       
                 maybereminiscentoftheconnectinghomomorphisminthe Snake Lemma1.6.5or  
                 inthelongexactsequenceincohomologyarisingfromashortexactsequenceof 
                 complexes,Theorem1.5.8. Thisisnocoincidence.)                      
                                              •55  •55  •                           
                            The2ndpage E :                                           
                                     2                                              
                                              •    •    •                           
                                                                                    
                                              •    •    •                           
                 Thisisthebeginningofapattern.                                      
                    Thenitisatheoremthatthereisafiltrationof Hk(E )by Ep,qwherep+q=k. 
                                                   •                                
                 (Wecan’tyetstateitasanofficial Theorembecausewehaven’tpreciselydefined
                 the pages and differentials in the spectral sequence.) More → precisely, there is a
                 filtration                                                         
                 (1.6.2.2) E0,k                                                     
                               ! E"1,k!1                                             
                                   $$ ?                                             
                                       !"E2,k!2                                     
                                          $$                                        
                                               !" Ek,0                              
                                                   $$ Hk(E )                        
                                                        •                           
                                            ···                                     
                                 →         →          →                                   
                 wherethequotient → saredisplayedaboveeachinclusion. (Hereisatipforremember
                 whichwaythequotientsaresupposedtogo. Thedifferentialsonlaterandlater
                 pagespointdeeperanddeeperintothefiltration. Thustheentriesinthedirection
                 ofthelaterarrowheadsarethesubobjects,andtheentriesinthedirectionofthe
                 later“arrowtails”arequotients. Thistiphastheadvantageofbeingindependentof
                 thedetailsofthespectralsequence,e.g.,the“quadrant”ortheorientation.)
                    We saythat the spectralsequence E , converges to H (E ). Weoften say
                                           ••          • •                          
                 that E , (oranyotherpage)abutsto H (•E ).                           
                      •2•                 • •                                       
                    Althoughthefiltrationgivesonlypa↑rtialinformationabout H (E ),sometimes
                                                         • •                        
                 onec↑anfind H (E )precisely. Oneexampleisifall Ei,k!iarezero,orifallbutone
                          • •                                                       
                 ofthemarezero(e.g.,if E , haspreciselyonenonzeroroworcolumn,inwhich 
                                 •r•                                                
                 caseonesaysthatthespectralsequencecollapsesatt → herthstep,althoughwewill
                 notusethisterm). Anotherexampleisinthecategoryofvectorspacesoverafield,
                 inwhichcasewecanfindthedimensionof Hk(E ). Also,inluckycircumstances,
                                               •                                    
                 E (orsomeothersmallpage)alreadyequals E .                           
                  2                                                                 
                                               →\n\n--- PAGE 67 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 67
                                                                                    
                 1.6. A. EXERCISE: INFORMATION FROM THE SECOND PAGE. Showthat H0(E • )=
                 E0,0 =E0,0and                                                      
                       2                                                            
                   →      0   $$E0,1 $$H1(E ) $$E1,0                                  
                                               d1                                   
                                                2                                   
                                                ,0                                  
                                                  $$E0,2 $$H2(E )                   
                             2        •     2      2        •                       
                 isexact.                                                           
                 1.6.3. Theotherorientation.                                        
                    You may have observed that we could as well have done everything in the
                 oppositedirection,i.e.,reversingtherolesofhorizontalandverticalmorphisms.
                 Thenthesequencesofarrowsgivingthespectralsequencewouldlooklikethis 
                 (compareto(1.6.2.1)).                                              
                 (1.6.3.1)                                                          
                                   •,,                                              
                                       $$                                           
                                   •   •                                            
                                            &&                                      
                                            •                                       
                                                 00                                 
                                                 •                                  
                 This spectral sequence is denoted E , (“with the upward orientation”). Then
                                        ••                                          
                 we would again get pieces of a filtra•tion of H (E ) (where we have to be a bit
                                              • •                                   
                 carefulwiththeorderwithwhich↓Ep,q correspondstothesubquotients—itis
                 theoppositeordertothatof(1.6.2.2)for Ep,q). Warning: ingeneralthereisno
                 isomorphismbetween Ep,qand E↓p → ,q.                                 
                    Infact,thisobservationthatwecanst↑art → witheitherthehorizontalorvertical
                 mapswasoursecretgoa↑la → llalong.↓Bo → thalgorithmscomputeinformationaboutthe
                 samething(H (E )),andusuallywedon’tcareaboutthefinalanswer—weoften 
                          • •                                                       
                 careabouttheanswerwegetinoneway,andwegetatitbydoingthespectral     
                 sequenceintheotherway.                                             
                 1.6.4. Examples.                                                   
                    Wearenowreadytoseehowthisisuseful. Themoraloftheseexamplesis    
                 thefollowing. Inthepast,youmayhaveprovedvariousfactsinvolvingvarious
                 sortsofdiagrams,bychasingelementsaround. Now,youwilljustplugtheminto
                 aspectralsequence,andletthespectralsequencemachinerydoyourchasingfor
                 you.                                                               
                 1.6.5. Example: Provingthe Snake Lemma. Considerthediagram           
                 (1.6.5.1)      0   $$D  $$E   $$F  $$0                             
                                     ,,   ,,   ,,                                   
                                    ϑ    ϖ    γ                                     
                                0   $$A  $$B  $$C   $$0                             
                 where the rows are exact in the middle (at A, B, C, D, E, F) and the squares
                 commute. (Normally the Snake Lemma is described with the vertical arrows
                 pointingdownwards,but Iwanttofitthisintomyspectralsequenceconventions.)\n\n--- PAGE 68 ---\n68    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 Wewishtoshowthatthereisanexactsequence                             
                                                                                    
                 (1.6.5.2) 0 kerα kerβ kerγ cokerα cokerβ cokerγ 0.                 
                                                                                    
                    Weplugthisintoourspectralsequencemachinery. Wefirstcomputethecoho-
                           →      →      →       →       →        →       →                       
                 mologyusingtherightwardorientation,i.e.,usingtheorder(1.6.2.1). Thenbecause
                 the rows are exact, Ep,q = 0, so the spectral sequence has already converged:
                               1                                                    
                 Ep,q =0.                                                           
                    Wenextcomputethis“0”inanotherway,bycomputingthespectralsequence 
                 us → ingtheupwardorientation. Then E , (withitsdifferentials)is:     
                                         •1•                                        
                          0    $$cokerα $$↓cokerβ $$cokerγ $$0                      
                          0     $$kerα  $$kerβ   $$kerγ  $$0.                       
                 Then E , isoftheform:                                              
                      •2•                                                           
                     ↓     0    0                                                   
                                                                                    
                                                                                    
                                0   && ?? &&?  ?    0                               
                                                                                    
                                                                                    
                                0    ?    &&? && ?? &&0                             
                                                                                    
                                                   &&0  &&0                         
                                                                                    
                 Weseethatafter E ,allthetermswillstabilizeexceptforthedoublequestionmarks
                             2                                                      
                 —allmapstoandfromthesinglequestionmarksaretoandfrom0-entries. And  
                 after E ,eventh↓esetwodouble-question-marktermswillstabilize. Butintheend
                      3                                                             
                 ourcomplexmustbethe0complex. Thismeansthatin E ,alltheentriesmustbe
                                                    2                               
                 zero,↓exceptforthetwodoublequestionmarks,andthesetwomustbeisomorphic.
                 Thismeansthat0 kerα kerβ kerγandcokerα↓ cokerβ cokerγ 0            
                 arebothexact(thatcomesfromthevanishingofthesinglequestionmarks),and
                             →       →      →             →        →       →                    
                                          ∼                                           
                            coker(kerβ kerγ)=ker(cokerα cokerβ)                     
                 isanisomorphism(thatcomesfromtheequalityofthedoublequestionmarks). 
                                    →                →                                  
                 Taken together, we have proved the exactness of (1.6.5.2), and hence the Snake
                 Lemma! (Notice: intheendwedidn’treallycareaboutthedoublecomplex. We
                 justuseditasaproptoprovethe Snake Lemma.)                            
                    Spectralsequencesmakeiteasytoseehowtogeneralizeresultsfurther. For
                 example,if A Bisnolongerassumedtobeinjective,howwouldtheconclusion  
                 change?                                                            
                           →                                                          
                 1.6. B. UNIMPORTANT EXERCISE (GRAFTING EXACT SEQUENCES, A VARIANT OF
                 THE SNAKE LEMMA). Extendthe Snake Lemmaasfollows. Supposewehavea\n\n--- PAGE 69 ---\n©2024Ravi Vakil. Publishedby Princeton University Press. 69
                                                                                    
                 commutingdiagram                                                   
                                                                                    
                               0    $$X  $$Y   $$Z  $$A   $$                        
                               ,,    ,, →   ,, →    ,, →   ,, →   ···                       
                                   a     b     c                                    
                              $$W   $$X  $$Y   $$Z  $$0.                            
                         ···                                                        
                 wherethetopandbottomrowsareexact. Showthatthetopandbottomrowscan   
                 be“graftedtogether”toanexactsequence                               
                         $$W   $$kera   $$kerb  $$kerc                              
                    ···                                                             
                               $$cokera $$cokerb $$cokerc $$A $$ .                  
                                                           →                          
                                                              ···                   
                 1.6.6. Example: the Five Lemma. Suppose                              
                 (1.6.6.1)      F   $$G   $$H  $$I  $$J                             
                                ,,   ,,    ,,   ,,   ,,                             
                               ϑ    ϖ    γ     δ    )                               
                                A    $$B  $$C  $$D  $$E                             
                 wheretherowsareexactandthesquarescommute.                          
                    Supposeα,β,φ,,areisomorphisms. Wewillshowthatγisanisomorphism.  
                    We first compute the cohomology of the total complex using the rightward
                 orientation(1.6.2.1). Wechoosethisbecauseweseethatwewillgetlotsofzeros.
                 Then E , lookslikethis:                                            
                       •1•                                                          
                                ?    0    0    0   ?                                
                     ↑           ,,  ,,   ,,   ,,   ,,                              
                                ?    0    0    0   ?                                
                 Then E lookssimilar,andthesequencewillconvergeby E ,aswewillneverget
                       2                              2                             
                 anyarrowsbetweentwononzeroentriesinatablethereafter. Wecan’tconclude
                 thatth↑ecohomologyofthetotalcomplexvanishes,butwecannotethatitvanishes
                 in all but four degrees — and most important, it vanishes in the two degrees
                 correspondingtotheentries Cand H(thesourceandtargetofγ).             
                    Wenextcomputethisusingtheupwardorientation(1.6.3.1). Then E looks
                                                               1                    
                 likethis:                                                          
                                0    $$0  $$? $$0  $$0       ↓                      
                                0    $$0  $$? $$0  $$0                              
                 andthespectralsequenceconvergesatthisstep. Wewishtoshowthatthosetwo
                 questionmarksarezero. Buttheyarepreciselythecohomologygroupsofthetotal
                 complexthatwejustshowedwerezero—sowearedone!                       
                    The best way to become comfortable with this sort of argument is to try it
                 outyourselfseveraltimes,andrealizethatitreallyiseasy. Soyoushoulddothe
                 followingexercises! Manycanreadilybedonedirectly,butyoushoulddeliberately
                 trytousethisspectralsequencemachineryinordertogetpracticeanddevelop
                 confidence.\n\n--- PAGE 70 ---\n70    Pre-publicationversion(2024-07-27)of The Rising Sea:Foundationsof Algebraic Geometry
                                                                                    
                 1.6. C. EXERCISE: A SUBTLER FIVE LEMMA. Bylookingatthespectralsequence
                 proofofthe Five Lemmaabove,proveasubtlerversionofthe Five Lemma,where  
                 oneoftheisomorphismscaninsteadjustberequiredtobeaninjection,andanother
                 caninsteadjustberequiredtobeasurjection. (Iamdeliberatelynottellingyou
                 whichones,soyoucanseehowthespectralsequenceistellingyouhowtoimprove
                 theresult.)                                                        
                 1.6. D. EXERCISE: ANOTHERSUBTLEVERSIONOFTHEFIVELEMMA. Ifβandφ(in     
                 (1.6.6.1))areinjective,andαissurjective,showthatγisinjective. Givethedual
                 statement(whoseproofisofcourseessentiallythesame).                 
                                                                                    
                    Thenexttwoexercisesnolongerinvolvefirstquadrantdoublecomplexes. You
                 willhavetothinkalittletorealizewhythereisnoreasonforconfusionoralarm.
                 1.6. E. IMPORTANT EXERCISE (THE MAPPING CONE). Suppose µ: A • B • is a
                 morphismofcomplexes. Suppose C isthesinglecomplexassociatedtothedouble
                                       •                                            
                 complex A                                                           
                        •                                                           
                           B                                                        
                            •                                                       
                            . (C                                                    
                               •                                                    
                                iscalledthemappingconeofµ.) Showthatthere → isalong   
                 exactsequenceofcomplexes:                                          
                          → Hi!1(C •) Hi(A •) Hi(B •) Hi(C •) Hi+1(A •) .             
                      ···                                   ···                     
                 (Thereisaslightnotationalambiguityhere; dependingonhowyouindexyour 
                 doublecom → plex,yourlo → ngexactse → quencemi → ghtlooksl → ightlydifferen → t.) Inparticu-
                 lar,wewillusethefactthatµinducesanisomorphismoncohomologyifandonly 
                 ifthemappingconeisexact. (Wewon’tuseituntiltheproofof Theorem18.2.4.)
                 1.6. F. EXERCISE. Usespectralsequencestoshowthatashortexactsequenceof
                 complexesgivesalongexactsequenceincohomology(Theorem1.5.8). (Thisisa
                 generalizationof Exercise1.6. E.)                                    
                    The Grothendieckcomposition-of-functorsspectralsequence(Theorem23.3.5)
                 willbeanimportantexampleofaspectralsequencethatspecializesinanumberof
                 usefulways.                                                        
                    Youarenowreadytogooutintotheworldandusespectralsequencestoyour  
                 heart’scontent!                                                    
                 1.6.7. Completedefinitionofspectralsequences,andproof.             
                    You should most definitely not read the precise definition of a spectral se-
                 quence,andtheproofthattheyworkasadvertised,anytimesoonafterreadingthe
                 introductiontospectralsequencesabove. Butafterasuitableinterval,youshould
                 at least flip through a construction and proof to convince yourself that nothing
                 fancyisinvolved. Theideaisnotasbadasyoumightthink,see[Vak2].       
                    Itisusefultonoticethattheproofimpliesthatspectralsequencesarefunctorial
                 inthe0thpage: thespectralsequenceformalismhasgoodfunctorialpropertiesin
                 thedoublecomplex. Unfortunately,Grothendieck’sterminology“spectralfunctor”
                 [Gr1,§2.4]didnotcatchon.\n